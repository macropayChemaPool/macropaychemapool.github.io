import{j as O}from"./jsx-runtime-CKrituN3.js";import{r as d,R as _}from"./index-CBqU2yxZ.js";import{c as q}from"./classNames-DY9r7t_J.js";import{S as me}from"./close-rI1dvE4l.js";import{S as xe}from"./down-CBhbPet_.js";import{T as ge,u as he,c as w,f as ye,a as Se}from"./index-Fp_I180m.js";import{T as Oe,e as Re,i as ae}from"./form-DdjUVvU2.js";import{O as ee,U as j,y as V,o as x,u as D,l as z,p as U,s as Le,d as H,x as Ie,C as M,a as $e,b as we,c as J,q as Te}from"./transition-BDdlExqH.js";import{y as Pe,h as ke,T as Ce,I as W,o as Ee,a as R,r as De,b as qe}from"./keyboard-B5upkSX_.js";import{s as Ne}from"./use-text-value-DqQEW2an.js";import{f as je,s as Ve}from"./hidden-CN1vEaDl.js";var Me=(e=>(e[e.Open=0]="Open",e[e.Closed=1]="Closed",e))(Me||{}),Fe=(e=>(e[e.Single=0]="Single",e[e.Multi=1]="Multi",e))(Fe||{}),Ae=(e=>(e[e.Pointer=0]="Pointer",e[e.Other=1]="Other",e))(Ae||{}),Be=(e=>(e[e.OpenListbox=0]="OpenListbox",e[e.CloseListbox=1]="CloseListbox",e[e.GoToOption=2]="GoToOption",e[e.Search=3]="Search",e[e.ClearSearch=4]="ClearSearch",e[e.RegisterOption=5]="RegisterOption",e[e.UnregisterOption=6]="UnregisterOption",e[e.RegisterLabel=7]="RegisterLabel",e))(Be||{});function K(e,n=i=>i){let i=e.activeOptionIndex!==null?e.options[e.activeOptionIndex]:null,r=qe(n(e.options.slice()),s=>s.dataRef.current.domRef.current),l=i?r.indexOf(i):null;return l===-1&&(l=null),{options:r,activeOptionIndex:l}}let Qe={1(e){return e.dataRef.current.disabled||e.listboxState===1?e:{...e,activeOptionIndex:null,listboxState:1}},0(e){if(e.dataRef.current.disabled||e.listboxState===0)return e;let n=e.activeOptionIndex,{isSelected:i}=e.dataRef.current,r=e.options.findIndex(l=>i(l.dataRef.current.value));return r!==-1&&(n=r),{...e,listboxState:0,activeOptionIndex:n}},2(e,n){var i;if(e.dataRef.current.disabled||e.listboxState===1)return e;let r=K(e),l=ye(n,{resolveItems:()=>r.options,resolveActiveIndex:()=>r.activeOptionIndex,resolveId:s=>s.id,resolveDisabled:s=>s.dataRef.current.disabled});return{...e,...r,searchQuery:"",activeOptionIndex:l,activationTrigger:(i=n.trigger)!=null?i:1}},3:(e,n)=>{if(e.dataRef.current.disabled||e.listboxState===1)return e;let i=e.searchQuery!==""?0:1,r=e.searchQuery+n.value.toLowerCase(),l=(e.activeOptionIndex!==null?e.options.slice(e.activeOptionIndex+i).concat(e.options.slice(0,e.activeOptionIndex+i)):e.options).find(t=>{var o;return!t.dataRef.current.disabled&&((o=t.dataRef.current.textValue)==null?void 0:o.startsWith(r))}),s=l?e.options.indexOf(l):-1;return s===-1||s===e.activeOptionIndex?{...e,searchQuery:r}:{...e,searchQuery:r,activeOptionIndex:s,activationTrigger:1}},4(e){return e.dataRef.current.disabled||e.listboxState===1||e.searchQuery===""?e:{...e,searchQuery:""}},5:(e,n)=>{let i={id:n.id,dataRef:n.dataRef},r=K(e,l=>[...l,i]);return e.activeOptionIndex===null&&e.dataRef.current.isSelected(n.dataRef.current.value)&&(r.activeOptionIndex=r.options.indexOf(i)),{...e,...r}},6:(e,n)=>{let i=K(e,r=>{let l=r.findIndex(s=>s.id===n.id);return l!==-1&&r.splice(l,1),r});return{...e,...i,activationTrigger:1}},7:(e,n)=>({...e,labelId:n.id})},X=d.createContext(null);X.displayName="ListboxActionsContext";function F(e){let n=d.useContext(X);if(n===null){let i=new Error(`<${e} /> is missing a parent <Listbox /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(i,F),i}return n}let Y=d.createContext(null);Y.displayName="ListboxDataContext";function A(e){let n=d.useContext(Y);if(n===null){let i=new Error(`<${e} /> is missing a parent <Listbox /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(i,A),i}return n}function _e(e,n){return D(n.type,Qe,e,n)}let ze=d.Fragment;function Ue(e,n){let{value:i,defaultValue:r,form:l,name:s,onChange:t,by:o=(u,b)=>u===b,disabled:c=!1,horizontal:p=!1,multiple:h=!1,...L}=e;const k=p?"horizontal":"vertical";let T=V(n),[g=h?[]:void 0,I]=Oe(i,t,r),[f,a]=d.useReducer(_e,{dataRef:d.createRef(),listboxState:1,options:[],searchQuery:"",labelId:null,activeOptionIndex:null,activationTrigger:1}),m=d.useRef({static:!1,hold:!1}),E=d.useRef(null),C=d.useRef(null),y=d.useRef(null),S=x(typeof o=="string"?(u,b)=>{let $=o;return(u==null?void 0:u[$])===(b==null?void 0:b[$])}:o),P=d.useCallback(u=>D(v.mode,{1:()=>g.some(b=>S(b,u)),0:()=>S(g,u)}),[g]),v=d.useMemo(()=>({...f,value:g,disabled:c,mode:h?1:0,orientation:k,compare:S,isSelected:P,optionsPropsRef:m,labelRef:E,buttonRef:C,optionsRef:y}),[g,c,h,f]);z(()=>{f.dataRef.current=v},[v]),Pe([v.buttonRef,v.optionsRef],(u,b)=>{var $;a({type:1}),ke(b,Ce.Loose)||(u.preventDefault(),($=v.buttonRef.current)==null||$.focus())},v.listboxState===0);let re=d.useMemo(()=>({open:v.listboxState===0,disabled:c,value:g}),[v,c,g]),ne=x(u=>{let b=v.options.find($=>$.id===u);b&&G(b.dataRef.current.value)}),le=x(()=>{if(v.activeOptionIndex!==null){let{dataRef:u,id:b}=v.options[v.activeOptionIndex];G(u.current.value),a({type:2,focus:w.Specific,id:b})}}),oe=x(()=>a({type:0})),ie=x(()=>a({type:1})),se=x((u,b,$)=>u===w.Specific?a({type:2,focus:w.Specific,id:b,trigger:$}):a({type:2,focus:u,trigger:$})),ue=x((u,b)=>(a({type:5,id:u,dataRef:b}),()=>a({type:6,id:u}))),de=x(u=>(a({type:7,id:u}),()=>a({type:7,id:null}))),G=x(u=>D(v.mode,{0(){return I==null?void 0:I(u)},1(){let b=v.value.slice(),$=b.findIndex(Q=>S(Q,u));return $===-1?b.push(u):b.splice($,1),I==null?void 0:I(b)}})),ce=x(u=>a({type:3,value:u})),pe=x(()=>a({type:4})),fe=d.useMemo(()=>({onChange:G,registerOption:ue,registerLabel:de,goToOption:se,closeListbox:ie,openListbox:oe,selectActiveOption:le,selectOption:ne,search:ce,clearSearch:pe}),[]),ve={ref:T},B=d.useRef(null),be=U();return d.useEffect(()=>{B.current&&r!==void 0&&be.addEventListener(B.current,"reset",()=>{I==null||I(r)})},[B,I]),_.createElement(X.Provider,{value:fe},_.createElement(Y.Provider,{value:v},_.createElement(Le,{value:D(v.listboxState,{0:H.Open,1:H.Closed})},s!=null&&g!=null&&Re({[s]:g}).map(([u,b],$)=>_.createElement(je,{features:Ve.Hidden,ref:$===0?Q=>{var Z;B.current=(Z=Q==null?void 0:Q.closest("form"))!=null?Z:null}:void 0,...Ie({key:u,as:"input",type:"hidden",hidden:!0,readOnly:!0,form:l,name:u,value:b})})),M({ourProps:ve,theirProps:L,slot:re,defaultTag:ze,name:"Listbox"}))))}let He="button";function We(e,n){var i;let r=W(),{id:l=`headlessui-listbox-button-${r}`,...s}=e,t=A("Listbox.Button"),o=F("Listbox.Button"),c=V(t.buttonRef,n),p=U(),h=x(f=>{switch(f.key){case R.Space:case R.Enter:case R.ArrowDown:f.preventDefault(),o.openListbox(),p.nextFrame(()=>{t.value||o.goToOption(w.First)});break;case R.ArrowUp:f.preventDefault(),o.openListbox(),p.nextFrame(()=>{t.value||o.goToOption(w.Last)});break}}),L=x(f=>{switch(f.key){case R.Space:f.preventDefault();break}}),k=x(f=>{if(De(f.currentTarget))return f.preventDefault();t.listboxState===0?(o.closeListbox(),p.nextFrame(()=>{var a;return(a=t.buttonRef.current)==null?void 0:a.focus({preventScroll:!0})})):(f.preventDefault(),o.openListbox())}),T=ae(()=>{if(t.labelId)return[t.labelId,l].join(" ")},[t.labelId,l]),g=d.useMemo(()=>({open:t.listboxState===0,disabled:t.disabled,value:t.value}),[t]),I={ref:c,id:l,type:ge(e,t.buttonRef),"aria-haspopup":"listbox","aria-controls":(i=t.optionsRef.current)==null?void 0:i.id,"aria-expanded":t.listboxState===0,"aria-labelledby":T,disabled:t.disabled,onKeyDown:h,onKeyUp:L,onClick:k};return M({ourProps:I,theirProps:s,slot:g,defaultTag:He,name:"Listbox.Button"})}let Ge="label";function Ke(e,n){let i=W(),{id:r=`headlessui-listbox-label-${i}`,...l}=e,s=A("Listbox.Label"),t=F("Listbox.Label"),o=V(s.labelRef,n);z(()=>t.registerLabel(r),[r]);let c=x(()=>{var h;return(h=s.buttonRef.current)==null?void 0:h.focus({preventScroll:!0})}),p=d.useMemo(()=>({open:s.listboxState===0,disabled:s.disabled}),[s]);return M({ourProps:{ref:o,id:r,onClick:c},theirProps:l,slot:p,defaultTag:Ge,name:"Listbox.Label"})}let Je="ul",Xe=ee.RenderStrategy|ee.Static;function Ye(e,n){var i;let r=W(),{id:l=`headlessui-listbox-options-${r}`,...s}=e,t=A("Listbox.Options"),o=F("Listbox.Options"),c=V(t.optionsRef,n),p=U(),h=U(),L=$e(),k=L!==null?(L&H.Open)===H.Open:t.listboxState===0;d.useEffect(()=>{var a;let m=t.optionsRef.current;m&&t.listboxState===0&&m!==((a=Ee(m))==null?void 0:a.activeElement)&&m.focus({preventScroll:!0})},[t.listboxState,t.optionsRef]);let T=x(a=>{switch(h.dispose(),a.key){case R.Space:if(t.searchQuery!=="")return a.preventDefault(),a.stopPropagation(),o.search(a.key);case R.Enter:if(a.preventDefault(),a.stopPropagation(),t.activeOptionIndex!==null){let{dataRef:m}=t.options[t.activeOptionIndex];o.onChange(m.current.value)}t.mode===0&&(o.closeListbox(),J().nextFrame(()=>{var m;return(m=t.buttonRef.current)==null?void 0:m.focus({preventScroll:!0})}));break;case D(t.orientation,{vertical:R.ArrowDown,horizontal:R.ArrowRight}):return a.preventDefault(),a.stopPropagation(),o.goToOption(w.Next);case D(t.orientation,{vertical:R.ArrowUp,horizontal:R.ArrowLeft}):return a.preventDefault(),a.stopPropagation(),o.goToOption(w.Previous);case R.Home:case R.PageUp:return a.preventDefault(),a.stopPropagation(),o.goToOption(w.First);case R.End:case R.PageDown:return a.preventDefault(),a.stopPropagation(),o.goToOption(w.Last);case R.Escape:return a.preventDefault(),a.stopPropagation(),o.closeListbox(),p.nextFrame(()=>{var m;return(m=t.buttonRef.current)==null?void 0:m.focus({preventScroll:!0})});case R.Tab:a.preventDefault(),a.stopPropagation();break;default:a.key.length===1&&(o.search(a.key),h.setTimeout(()=>o.clearSearch(),350));break}}),g=ae(()=>{var a;return(a=t.buttonRef.current)==null?void 0:a.id},[t.buttonRef.current]),I=d.useMemo(()=>({open:t.listboxState===0}),[t]),f={"aria-activedescendant":t.activeOptionIndex===null||(i=t.options[t.activeOptionIndex])==null?void 0:i.id,"aria-multiselectable":t.mode===1?!0:void 0,"aria-labelledby":g,"aria-orientation":t.orientation,id:l,onKeyDown:T,role:"listbox",tabIndex:0,ref:c};return M({ourProps:f,theirProps:s,slot:I,defaultTag:Je,features:Xe,visible:k,name:"Listbox.Options"})}let Ze="li";function et(e,n){let i=W(),{id:r=`headlessui-listbox-option-${i}`,disabled:l=!1,value:s,...t}=e,o=A("Listbox.Option"),c=F("Listbox.Option"),p=o.activeOptionIndex!==null?o.options[o.activeOptionIndex].id===r:!1,h=o.isSelected(s),L=d.useRef(null),k=Ne(L),T=we({disabled:l,value:s,domRef:L,get textValue(){return k()}}),g=V(n,L);z(()=>{if(o.listboxState!==0||!p||o.activationTrigger===0)return;let S=J();return S.requestAnimationFrame(()=>{var P,v;(v=(P=L.current)==null?void 0:P.scrollIntoView)==null||v.call(P,{block:"nearest"})}),S.dispose},[L,p,o.listboxState,o.activationTrigger,o.activeOptionIndex]),z(()=>c.registerOption(r,T),[T,r]);let I=x(S=>{if(l)return S.preventDefault();c.onChange(s),o.mode===0&&(c.closeListbox(),J().nextFrame(()=>{var P;return(P=o.buttonRef.current)==null?void 0:P.focus({preventScroll:!0})}))}),f=x(()=>{if(l)return c.goToOption(w.Nothing);c.goToOption(w.Specific,r)}),a=he(),m=x(S=>a.update(S)),E=x(S=>{a.wasMoved(S)&&(l||p||c.goToOption(w.Specific,r,0))}),C=x(S=>{a.wasMoved(S)&&(l||p&&c.goToOption(w.Nothing))}),y=d.useMemo(()=>({active:p,selected:h,disabled:l}),[p,h,l]);return M({ourProps:{id:r,ref:g,role:"option",tabIndex:l===!0?void 0:-1,"aria-disabled":l===!0?!0:void 0,"aria-selected":h,disabled:void 0,onClick:I,onFocus:f,onPointerEnter:m,onMouseEnter:m,onPointerMove:E,onMouseMove:E,onPointerLeave:C,onMouseLeave:C},theirProps:t,slot:y,defaultTag:Ze,name:"Listbox.Option"})}let tt=j(Ue),at=j(We),rt=j(Ke),nt=j(Ye),lt=j(et),N=Object.assign(tt,{Button:at,Label:rt,Options:nt,Option:lt});const te=({type:e="normal",size:n="xl",error:i,label:r,options:l,defaultValue:s,placeholder:t="Selecciona una opción",className:o="",disabled:c=!1,readOnly:p=!1,required:h=!1,onChange:L,...k})=>{const T=d.useRef(null),g={value:"",label:`${t}`},I=[{...g},...l],[f,a]=d.useState(s??I[0]),m=()=>a(g),E=q({"h-44":l.length>3},"bg-white absolute w-full overflow-auto rounded-lg text-base shadow-md ring-black/5 focus:outline-none z-50 p-1");return d.useEffect(()=>{addEventListener("reset",()=>{m()}),addEventListener("submit",()=>{m()})},[]),O.jsxs("div",{className:"relative w-full",children:[O.jsx("select",{style:{display:"none"},ref:T}),O.jsx(N,{value:f,onChange:C=>{p||(a(C),L==null||L(C),T.current&&T.current.dispatchEvent(new Event("change",{bubbles:!0})))},disabled:c||p,defaultValue:s,rest:k,children:({open:C})=>O.jsxs(O.Fragment,{children:[!!r&&O.jsxs(N.Label,{className:q("text-gray-10 mb-2 text-base font-normal",{"block leading-6":e==="normal","absolute text-xl duration-300 transform -translate-y-6 scale-75 top-0 origin-[0]":e==="underline"}),children:[O.jsx("label",{className:"text-red-500 mr-1",children:h&&"*"}),r&&`${r}`]}),O.jsxs("div",{className:"w-full flex items-center align-middle justify-center",children:[O.jsxs(N.Button,{className:q("relative w-full text bg-white truncate text-left pl-3 ring-1 ring-inset pr-8",{"h-6 text-sm":n==="sm","h-8 text-base":n==="md","h-10 text-lg":n==="lg","h-12 text-lg":n==="xl","cursor-not-allowed ring-gray-7 bg-gray-4 text-gray-6":c,"text-gray-6":!f.value,"ring-gray-7":!c,"\n                rounded-lg\n                font-normal focus-visible:outline-none\n                focus:ring-primary-blue ":e==="normal","block\n                  w-full\n                  ring-transparent\n                  border-b border-gray-300\n                focus:border-primary-blue\n                  focus-visible:outline-none bg-transparent\n                  appearance-none\n                ":e==="underline","cursor-not-allowed text-primary-blue":p,[o]:o}),children:[f.label,!f.value&&O.jsx("span",{className:"pointer-events-none absolute inset-y-0 right-0 flex items-center pr-4",children:O.jsx(xe,{className:"size-5","aria-hidden":"true"})})]}),!!f.value&&O.jsx("span",{className:q("absolute right-0 flex items-center pr-4 text-gray-6",{"cursor-not-allowed":c||p,"text-primary-blue":p,"hover:text-gray-8 z-50 cursor-pointer transition-all duration-100 ease-linear":!c&&!p}),children:O.jsx(me,{"aria-hidden":!0,className:"size-5",onClick:()=>!c&&!p&&m()})})]}),O.jsx(Te,{show:C,as:d.Fragment,...Se,children:O.jsx(N.Options,{className:E,children:l==null?void 0:l.map((y,S)=>O.jsx(N.Option,{disabled:y==null?void 0:y.disabled,className:({active:P,selected:v})=>q("relative w-100 py-2 select-none px-4 rounded-lg",{"cursor-pointer":!(y!=null&&y.disabled),"bg-gray-4":!v&&P,"bg-tints-Blue-90 font-bold":v||v&&P,"cursor-not-allowed text-gray-300":y==null?void 0:y.disabled}),value:y,children:y==null?void 0:y.label},`${S}_-_${r}`))})})]})}),i&&O.jsx("p",{className:"text-sm text-red-600",children:i})]})};try{te.displayName="Select",te.__docgenInfo={description:"",displayName:"Select",props:{label:{defaultValue:null,description:"",name:"label",required:!1,type:{name:"string"}},options:{defaultValue:null,description:"",name:"options",required:!0,type:{name:"TOption[]"}},defaultValue:{defaultValue:null,description:"",name:"defaultValue",required:!1,type:{name:"TOption"}},placeholder:{defaultValue:{value:"Selecciona una opción"},description:"",name:"placeholder",required:!1,type:{name:"string"}},size:{defaultValue:{value:"xl"},description:"",name:"size",required:!1,type:{name:"enum",value:[{value:'"sm"'},{value:'"md"'},{value:'"lg"'},{value:'"xl"'}]}},type:{defaultValue:{value:"normal"},description:"",name:"type",required:!1,type:{name:"enum",value:[{value:'"normal"'},{value:'"underline"'}]}},error:{defaultValue:null,description:"",name:"error",required:!1,type:{name:"ReactNode"}},disabled:{defaultValue:{value:"false"},description:"",name:"disabled",required:!1,type:{name:"boolean"}},readOnly:{defaultValue:{value:"false"},description:"",name:"readOnly",required:!1,type:{name:"boolean"}},required:{defaultValue:{value:"false"},description:"",name:"required",required:!1,type:{name:"boolean"}},listHeight:{defaultValue:null,description:"",name:"listHeight",required:!1,type:{name:"enum",value:[{value:"12"},{value:"16"},{value:"44"},{value:"48"}]}},onChange:{defaultValue:null,description:"",name:"onChange",required:!1,type:{name:"((value: TOption) => void)"}},onSearch:{defaultValue:null,description:"",name:"onSearch",required:!1,type:{name:"((value: string) => void)"}},className:{defaultValue:{value:""},description:"",name:"className",required:!1,type:{name:"string"}},onClick:{defaultValue:null,description:"",name:"onClick",required:!1,type:{name:"(() => void)"}},style:{defaultValue:null,description:"",name:"style",required:!1,type:{name:"CSSProperties"}}}}}catch{}export{te as S};
