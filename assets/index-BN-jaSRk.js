import{j as m}from"./jsx-runtime-CKrituN3.js";import{r as d,R as L}from"./index-CBqU2yxZ.js";import{B as V,S as J}from"./index-BBeAxNTk.js";import{S as Z}from"./store-Co352TV1.js";import{F}from"./index-IKkC8jR6.js";import{T as X,u as Y,c as b,f as ee,d as te}from"./index-Fp_I180m.js";import{u as re}from"./index-Dmv3E6R1.js";import{n as ae}from"./index.browser-DP16PUbO.js";import{c as M}from"./classNames-DY9r7t_J.js";import{u as ne}from"./useTranslation-GCZZtW1t.js";import{O as Q,U as $,y as k,o as y,s as se,u as W,d as E,C as N,p as z,a as ie,l as C,c as A,q as oe}from"./transition-BDdlExqH.js";import{y as ue,I as O,h as le,T as ce,a as p,r as me,_ as de,M as K,D as H,b as pe}from"./keyboard-B5upkSX_.js";import{n as fe}from"./use-owner-BuQqy2kA.js";import{s as ve}from"./use-text-value-DqQEW2an.js";import{F as ge}from"./use-tree-walker-B-9c0BuR.js";const xe=e=>d.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",height:"1em",width:"1em",fill:"currentColor",viewBox:"0 -960 960 960",...e},d.createElement("path",{d:"M480-360 280-560h400L480-360Z"}));var ye=(e=>(e[e.Open=0]="Open",e[e.Closed=1]="Closed",e))(ye||{}),he=(e=>(e[e.Pointer=0]="Pointer",e[e.Other=1]="Other",e))(he||{}),Ie=(e=>(e[e.OpenMenu=0]="OpenMenu",e[e.CloseMenu=1]="CloseMenu",e[e.GoToItem=2]="GoToItem",e[e.Search=3]="Search",e[e.ClearSearch=4]="ClearSearch",e[e.RegisterItem=5]="RegisterItem",e[e.UnregisterItem=6]="UnregisterItem",e))(Ie||{});function U(e,o=s=>s){let s=e.activeItemIndex!==null?e.items[e.activeItemIndex]:null,n=pe(o(e.items.slice()),u=>u.dataRef.current.domRef.current),r=s?n.indexOf(s):null;return r===-1&&(r=null),{items:n,activeItemIndex:r}}let be={1(e){return e.menuState===1?e:{...e,activeItemIndex:null,menuState:1}},0(e){return e.menuState===0?e:{...e,__demoMode:!1,menuState:0}},2:(e,o)=>{var s;let n=U(e),r=ee(o,{resolveItems:()=>n.items,resolveActiveIndex:()=>n.activeItemIndex,resolveId:u=>u.id,resolveDisabled:u=>u.dataRef.current.disabled});return{...e,...n,searchQuery:"",activeItemIndex:r,activationTrigger:(s=o.trigger)!=null?s:1}},3:(e,o)=>{let s=e.searchQuery!==""?0:1,n=e.searchQuery+o.value.toLowerCase(),r=(e.activeItemIndex!==null?e.items.slice(e.activeItemIndex+s).concat(e.items.slice(0,e.activeItemIndex+s)):e.items).find(i=>{var t;return((t=i.dataRef.current.textValue)==null?void 0:t.startsWith(n))&&!i.dataRef.current.disabled}),u=r?e.items.indexOf(r):-1;return u===-1||u===e.activeItemIndex?{...e,searchQuery:n}:{...e,searchQuery:n,activeItemIndex:u,activationTrigger:1}},4(e){return e.searchQuery===""?e:{...e,searchQuery:"",searchActiveItemIndex:null}},5:(e,o)=>{let s=U(e,n=>[...n,{id:o.id,dataRef:o.dataRef}]);return{...e,...s}},6:(e,o)=>{let s=U(e,n=>{let r=n.findIndex(u=>u.id===o.id);return r!==-1&&n.splice(r,1),n});return{...e,...s,activationTrigger:1}}},q=d.createContext(null);q.displayName="MenuContext";function _(e){let o=d.useContext(q);if(o===null){let s=new Error(`<${e} /> is missing a parent <Menu /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(s,_),s}return o}function Re(e,o){return W(o.type,be,e,o)}let we=d.Fragment;function Se(e,o){let{__demoMode:s=!1,...n}=e,r=d.useReducer(Re,{__demoMode:s,menuState:s?0:1,buttonRef:d.createRef(),itemsRef:d.createRef(),items:[],searchQuery:"",activeItemIndex:null,activationTrigger:1}),[{menuState:u,itemsRef:i,buttonRef:t},l]=r,f=k(o);ue([t,i],(I,R)=>{var c;l({type:1}),le(R,ce.Loose)||(I.preventDefault(),(c=t.current)==null||c.focus())},u===0);let x=y(()=>{l({type:1})}),h=d.useMemo(()=>({open:u===0,close:x}),[u,x]),v={ref:f};return L.createElement(q.Provider,{value:r},L.createElement(se,{value:W(u,{0:E.Open,1:E.Closed})},N({ourProps:v,theirProps:n,slot:h,defaultTag:we,name:"Menu"})))}let Me="button";function Pe(e,o){var s;let n=O(),{id:r=`headlessui-menu-button-${n}`,...u}=e,[i,t]=_("Menu.Button"),l=k(i.buttonRef,o),f=z(),x=y(c=>{switch(c.key){case p.Space:case p.Enter:case p.ArrowDown:c.preventDefault(),c.stopPropagation(),t({type:0}),f.nextFrame(()=>t({type:2,focus:b.First}));break;case p.ArrowUp:c.preventDefault(),c.stopPropagation(),t({type:0}),f.nextFrame(()=>t({type:2,focus:b.Last}));break}}),h=y(c=>{switch(c.key){case p.Space:c.preventDefault();break}}),v=y(c=>{if(me(c.currentTarget))return c.preventDefault();e.disabled||(i.menuState===0?(t({type:1}),f.nextFrame(()=>{var w;return(w=i.buttonRef.current)==null?void 0:w.focus({preventScroll:!0})})):(c.preventDefault(),t({type:0})))}),I=d.useMemo(()=>({open:i.menuState===0}),[i]),R={ref:l,id:r,type:X(e,i.buttonRef),"aria-haspopup":"menu","aria-controls":(s=i.itemsRef.current)==null?void 0:s.id,"aria-expanded":i.menuState===0,onKeyDown:x,onKeyUp:h,onClick:v};return N({ourProps:R,theirProps:u,slot:I,defaultTag:Me,name:"Menu.Button"})}let Te="div",De=Q.RenderStrategy|Q.Static;function Ee(e,o){var s,n;let r=O(),{id:u=`headlessui-menu-items-${r}`,...i}=e,[t,l]=_("Menu.Items"),f=k(t.itemsRef,o),x=fe(t.itemsRef),h=z(),v=ie(),I=v!==null?(v&E.Open)===E.Open:t.menuState===0;d.useEffect(()=>{let a=t.itemsRef.current;a&&t.menuState===0&&a!==(x==null?void 0:x.activeElement)&&a.focus({preventScroll:!0})},[t.menuState,t.itemsRef,x]),ge({container:t.itemsRef.current,enabled:t.menuState===0,accept(a){return a.getAttribute("role")==="menuitem"?NodeFilter.FILTER_REJECT:a.hasAttribute("role")?NodeFilter.FILTER_SKIP:NodeFilter.FILTER_ACCEPT},walk(a){a.setAttribute("role","none")}});let R=y(a=>{var S,T;switch(h.dispose(),a.key){case p.Space:if(t.searchQuery!=="")return a.preventDefault(),a.stopPropagation(),l({type:3,value:a.key});case p.Enter:if(a.preventDefault(),a.stopPropagation(),l({type:1}),t.activeItemIndex!==null){let{dataRef:g}=t.items[t.activeItemIndex];(T=(S=g.current)==null?void 0:S.domRef.current)==null||T.click()}H(t.buttonRef.current);break;case p.ArrowDown:return a.preventDefault(),a.stopPropagation(),l({type:2,focus:b.Next});case p.ArrowUp:return a.preventDefault(),a.stopPropagation(),l({type:2,focus:b.Previous});case p.Home:case p.PageUp:return a.preventDefault(),a.stopPropagation(),l({type:2,focus:b.First});case p.End:case p.PageDown:return a.preventDefault(),a.stopPropagation(),l({type:2,focus:b.Last});case p.Escape:a.preventDefault(),a.stopPropagation(),l({type:1}),A().nextFrame(()=>{var g;return(g=t.buttonRef.current)==null?void 0:g.focus({preventScroll:!0})});break;case p.Tab:a.preventDefault(),a.stopPropagation(),l({type:1}),A().nextFrame(()=>{de(t.buttonRef.current,a.shiftKey?K.Previous:K.Next)});break;default:a.key.length===1&&(l({type:3,value:a.key}),h.setTimeout(()=>l({type:4}),350));break}}),c=y(a=>{switch(a.key){case p.Space:a.preventDefault();break}}),w=d.useMemo(()=>({open:t.menuState===0}),[t]),P={"aria-activedescendant":t.activeItemIndex===null||(s=t.items[t.activeItemIndex])==null?void 0:s.id,"aria-labelledby":(n=t.buttonRef.current)==null?void 0:n.id,id:u,onKeyDown:R,onKeyUp:c,role:"menu",tabIndex:0,ref:f};return N({ourProps:P,theirProps:i,slot:w,defaultTag:Te,features:De,visible:I,name:"Menu.Items"})}let $e=d.Fragment;function ke(e,o){let s=O(),{id:n=`headlessui-menu-item-${s}`,disabled:r=!1,...u}=e,[i,t]=_("Menu.Item"),l=i.activeItemIndex!==null?i.items[i.activeItemIndex].id===n:!1,f=d.useRef(null),x=k(o,f);C(()=>{if(i.__demoMode||i.menuState!==0||!l||i.activationTrigger===0)return;let g=A();return g.requestAnimationFrame(()=>{var j,B;(B=(j=f.current)==null?void 0:j.scrollIntoView)==null||B.call(j,{block:"nearest"})}),g.dispose},[i.__demoMode,f,l,i.menuState,i.activationTrigger,i.activeItemIndex]);let h=ve(f),v=d.useRef({disabled:r,domRef:f,get textValue(){return h()}});C(()=>{v.current.disabled=r},[v,r]),C(()=>(t({type:5,id:n,dataRef:v}),()=>t({type:6,id:n})),[v,n]);let I=y(()=>{t({type:1})}),R=y(g=>{if(r)return g.preventDefault();t({type:1}),H(i.buttonRef.current)}),c=y(()=>{if(r)return t({type:2,focus:b.Nothing});t({type:2,focus:b.Specific,id:n})}),w=Y(),P=y(g=>w.update(g)),a=y(g=>{w.wasMoved(g)&&(r||l||t({type:2,focus:b.Specific,id:n,trigger:0}))}),S=y(g=>{w.wasMoved(g)&&(r||l&&t({type:2,focus:b.Nothing}))}),T=d.useMemo(()=>({active:l,disabled:r,close:I}),[l,r,I]);return N({ourProps:{id:n,ref:x,role:"menuitem",tabIndex:r===!0?void 0:-1,"aria-disabled":r===!0?!0:void 0,disabled:void 0,onClick:R,onFocus:c,onPointerEnter:P,onMouseEnter:P,onPointerMove:a,onMouseMove:a,onPointerLeave:S,onMouseLeave:S},theirProps:u,slot:T,defaultTag:$e,name:"Menu.Item"})}let Ne=$(Se),_e=$(Pe),je=$(Ee),Fe=$(ke),D=Object.assign(Ne,{Button:_e,Items:je,Item:Fe});const G=({avatar:e,rol:o="",userName:s="User Name",menuItems:n,storeInfo:r,theme:u="white"})=>{const{t:i}=ne(),{xs:t,sm:l}=re(),f=[...t?[{label:m.jsxs(F,{align:"end",justify:"end",className:"w-full",direction:"vertical",children:[m.jsx("span",{className:"text-primary-blue",children:s}),m.jsx("span",{className:"text-gray-6",children:o})]})}]:[],...t&&r?[...r.store?[{label:m.jsx(V,{Icon:Z,label:i("header.store"),value:(r==null?void 0:r.store)??0,isBetween:!0,theme:u})}]:[],...r.cashRegister?[{label:m.jsx(V,{Icon:J,label:i("header.cashRegister"),value:(r==null?void 0:r.cashRegister)??0,isBetween:!0,theme:u})}]:[]]:[],...n];return m.jsxs(D,{as:"div",className:M("relative",{}),children:[m.jsx(D.Button,{className:"max-w-lg bg-transparent flex items-center text-sm rounded-full",children:m.jsxs(F,{gap:2,align:"center",children:[m.jsx("div",{children:e}),l&&m.jsxs(F,{align:"start",direction:"vertical",children:[m.jsx("p",{className:M("text-base font-bold text-primary-blue group-hover:text-primary-blue",{"text-white":u==="blue"}),children:s}),m.jsx("p",{className:M("text-sm font-medium text-grays group-hover:text-gray-500",{"text-white":u==="blue"}),children:o})]}),m.jsx(xe,{className:M("text-2xl ml-1",{"text-white bg-shades-Blue-30 rounded":u==="blue"})})]})}),m.jsx(oe,{as:d.Fragment,...te,children:m.jsx(D.Items,{className:"py-2 absolute right-0 mt-2 w-max origin-top-right divide-y divide-gray-100 rounded-md bg-white shadow-lg ring-1 ring-black/5 focus:outline-none z-[2]",children:f.map(({label:x,href:h,disabled:v,onClick:I})=>m.jsx(D.Item,{disabled:v,children:({active:R})=>m.jsx("a",{href:h,onClick:I,className:M("group flex w-full items-center rounded-none px-4 py-2 text-sm transition delay-150 duration-200 ease-in-out",{"cursor-pointer text-gray-8":!v,"bg-grays-Macropay-02":R,"cursor-not-allowed text-gray-300":v}),children:x})},ae()))})})]})};try{G.displayName="UserMenu",G.__docgenInfo={description:"",displayName:"UserMenu",props:{menuItems:{defaultValue:null,description:"",name:"menuItems",required:!0,type:{name:"MenuItem[]"}},avatar:{defaultValue:null,description:"",name:"avatar",required:!1,type:{name:"ReactNode"}},theme:{defaultValue:{value:"white"},description:"",name:"theme",required:!1,type:{name:"enum",value:[{value:'"blue"'},{value:'"white"'}]}},userName:{defaultValue:{value:"User Name"},description:"",name:"userName",required:!1,type:{name:"string"}},rol:{defaultValue:{value:""},description:"",name:"rol",required:!1,type:{name:"string"}},storeInfo:{defaultValue:null,description:"",name:"storeInfo",required:!1,type:{name:"IStoreInfo"}},langs:{defaultValue:null,description:"",name:"langs",required:!1,type:{name:"Locale[]"}},showMenuUser:{defaultValue:null,description:"",name:"showMenuUser",required:!1,type:{name:"boolean"}}}}}catch{}export{xe as S,G as U,D as q};
