import{j as S}from"./jsx-runtime-CKrituN3.js";import{r as p,R as z}from"./index-CBqU2yxZ.js";import{c as N}from"./classNames-CoONMu-Z.js";import{S as xe}from"./close-rI1dvE4l.js";import{T as me,e as ge,i as re,S as he}from"./form-BsJ3P7Gw.js";import{T as ye,u as Se,c as $,f as Oe,a as Re}from"./index-QaoBqWcy.js";import{O as te,U as V,y as M,o as x,u as E,l as U,p as H,s as Le,d as W,x as Ie,C as F,a as $e,b as we,c as X,q as Te}from"./transition-BDdlExqH.js";import{y as Pe,h as ke,T as Ce,I as G,o as De,a as O,r as Ee,b as qe}from"./keyboard-B5upkSX_.js";import{s as Ne}from"./use-text-value-DqQEW2an.js";import{f as je,s as Ve}from"./hidden-CN1vEaDl.js";var Me=(e=>(e[e.Open=0]="Open",e[e.Closed=1]="Closed",e))(Me||{}),Fe=(e=>(e[e.Single=0]="Single",e[e.Multi=1]="Multi",e))(Fe||{}),Ae=(e=>(e[e.Pointer=0]="Pointer",e[e.Other=1]="Other",e))(Ae||{}),Be=(e=>(e[e.OpenListbox=0]="OpenListbox",e[e.CloseListbox=1]="CloseListbox",e[e.GoToOption=2]="GoToOption",e[e.Search=3]="Search",e[e.ClearSearch=4]="ClearSearch",e[e.RegisterOption=5]="RegisterOption",e[e.UnregisterOption=6]="UnregisterOption",e[e.RegisterLabel=7]="RegisterLabel",e))(Be||{});function J(e,l=i=>i){let i=e.activeOptionIndex!==null?e.options[e.activeOptionIndex]:null,r=qe(l(e.options.slice()),s=>s.dataRef.current.domRef.current),o=i?r.indexOf(i):null;return o===-1&&(o=null),{options:r,activeOptionIndex:o}}let Qe={1(e){return e.dataRef.current.disabled||e.listboxState===1?e:{...e,activeOptionIndex:null,listboxState:1}},0(e){if(e.dataRef.current.disabled||e.listboxState===0)return e;let l=e.activeOptionIndex,{isSelected:i}=e.dataRef.current,r=e.options.findIndex(o=>i(o.dataRef.current.value));return r!==-1&&(l=r),{...e,listboxState:0,activeOptionIndex:l}},2(e,l){var i;if(e.dataRef.current.disabled||e.listboxState===1)return e;let r=J(e),o=Oe(l,{resolveItems:()=>r.options,resolveActiveIndex:()=>r.activeOptionIndex,resolveId:s=>s.id,resolveDisabled:s=>s.dataRef.current.disabled});return{...e,...r,searchQuery:"",activeOptionIndex:o,activationTrigger:(i=l.trigger)!=null?i:1}},3:(e,l)=>{if(e.dataRef.current.disabled||e.listboxState===1)return e;let i=e.searchQuery!==""?0:1,r=e.searchQuery+l.value.toLowerCase(),o=(e.activeOptionIndex!==null?e.options.slice(e.activeOptionIndex+i).concat(e.options.slice(0,e.activeOptionIndex+i)):e.options).find(t=>{var n;return!t.dataRef.current.disabled&&((n=t.dataRef.current.textValue)==null?void 0:n.startsWith(r))}),s=o?e.options.indexOf(o):-1;return s===-1||s===e.activeOptionIndex?{...e,searchQuery:r}:{...e,searchQuery:r,activeOptionIndex:s,activationTrigger:1}},4(e){return e.dataRef.current.disabled||e.listboxState===1||e.searchQuery===""?e:{...e,searchQuery:""}},5:(e,l)=>{let i={id:l.id,dataRef:l.dataRef},r=J(e,o=>[...o,i]);return e.activeOptionIndex===null&&e.dataRef.current.isSelected(l.dataRef.current.value)&&(r.activeOptionIndex=r.options.indexOf(i)),{...e,...r}},6:(e,l)=>{let i=J(e,r=>{let o=r.findIndex(s=>s.id===l.id);return o!==-1&&r.splice(o,1),r});return{...e,...i,activationTrigger:1}},7:(e,l)=>({...e,labelId:l.id})},Y=p.createContext(null);Y.displayName="ListboxActionsContext";function A(e){let l=p.useContext(Y);if(l===null){let i=new Error(`<${e} /> is missing a parent <Listbox /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(i,A),i}return l}let Z=p.createContext(null);Z.displayName="ListboxDataContext";function B(e){let l=p.useContext(Z);if(l===null){let i=new Error(`<${e} /> is missing a parent <Listbox /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(i,B),i}return l}function _e(e,l){return E(l.type,Qe,e,l)}let ze=p.Fragment;function Ue(e,l){let{value:i,defaultValue:r,form:o,name:s,onChange:t,by:n=(u,f)=>u===f,disabled:c=!1,horizontal:b=!1,multiple:y=!1,...L}=e;const w=b?"horizontal":"vertical";let T=M(l),[h=y?[]:void 0,R]=me(i,t,r),[m,a]=p.useReducer(_e,{dataRef:p.createRef(),listboxState:1,options:[],searchQuery:"",labelId:null,activeOptionIndex:null,activationTrigger:1}),g=p.useRef({static:!1,hold:!1}),C=p.useRef(null),D=p.useRef(null),k=p.useRef(null),d=x(typeof n=="string"?(u,f)=>{let I=n;return(u==null?void 0:u[I])===(f==null?void 0:f[I])}:n),P=p.useCallback(u=>E(v.mode,{1:()=>h.some(f=>d(f,u)),0:()=>d(h,u)}),[h]),v=p.useMemo(()=>({...m,value:h,disabled:c,mode:y?1:0,orientation:w,compare:d,isSelected:P,optionsPropsRef:g,labelRef:C,buttonRef:D,optionsRef:k}),[h,c,y,m]);U(()=>{m.dataRef.current=v},[v]),Pe([v.buttonRef,v.optionsRef],(u,f)=>{var I;a({type:1}),ke(f,Ce.Loose)||(u.preventDefault(),(I=v.buttonRef.current)==null||I.focus())},v.listboxState===0);let q=p.useMemo(()=>({open:v.listboxState===0,disabled:c,value:h}),[v,c,h]),ne=x(u=>{let f=v.options.find(I=>I.id===u);f&&K(f.dataRef.current.value)}),le=x(()=>{if(v.activeOptionIndex!==null){let{dataRef:u,id:f}=v.options[v.activeOptionIndex];K(u.current.value),a({type:2,focus:$.Specific,id:f})}}),oe=x(()=>a({type:0})),ie=x(()=>a({type:1})),se=x((u,f,I)=>u===$.Specific?a({type:2,focus:$.Specific,id:f,trigger:I}):a({type:2,focus:u,trigger:I})),ue=x((u,f)=>(a({type:5,id:u,dataRef:f}),()=>a({type:6,id:u}))),de=x(u=>(a({type:7,id:u}),()=>a({type:7,id:null}))),K=x(u=>E(v.mode,{0(){return R==null?void 0:R(u)},1(){let f=v.value.slice(),I=f.findIndex(_=>d(_,u));return I===-1?f.push(u):f.splice(I,1),R==null?void 0:R(f)}})),ce=x(u=>a({type:3,value:u})),pe=x(()=>a({type:4})),fe=p.useMemo(()=>({onChange:K,registerOption:ue,registerLabel:de,goToOption:se,closeListbox:ie,openListbox:oe,selectActiveOption:le,selectOption:ne,search:ce,clearSearch:pe}),[]),ve={ref:T},Q=p.useRef(null),be=H();return p.useEffect(()=>{Q.current&&r!==void 0&&be.addEventListener(Q.current,"reset",()=>{R==null||R(r)})},[Q,R]),z.createElement(Y.Provider,{value:fe},z.createElement(Z.Provider,{value:v},z.createElement(Le,{value:E(v.listboxState,{0:W.Open,1:W.Closed})},s!=null&&h!=null&&ge({[s]:h}).map(([u,f],I)=>z.createElement(je,{features:Ve.Hidden,ref:I===0?_=>{var ee;Q.current=(ee=_==null?void 0:_.closest("form"))!=null?ee:null}:void 0,...Ie({key:u,as:"input",type:"hidden",hidden:!0,readOnly:!0,form:o,name:u,value:f})})),F({ourProps:ve,theirProps:L,slot:q,defaultTag:ze,name:"Listbox"}))))}let He="button";function We(e,l){var i;let r=G(),{id:o=`headlessui-listbox-button-${r}`,...s}=e,t=B("Listbox.Button"),n=A("Listbox.Button"),c=M(t.buttonRef,l),b=H(),y=x(m=>{switch(m.key){case O.Space:case O.Enter:case O.ArrowDown:m.preventDefault(),n.openListbox(),b.nextFrame(()=>{t.value||n.goToOption($.First)});break;case O.ArrowUp:m.preventDefault(),n.openListbox(),b.nextFrame(()=>{t.value||n.goToOption($.Last)});break}}),L=x(m=>{switch(m.key){case O.Space:m.preventDefault();break}}),w=x(m=>{if(Ee(m.currentTarget))return m.preventDefault();t.listboxState===0?(n.closeListbox(),b.nextFrame(()=>{var a;return(a=t.buttonRef.current)==null?void 0:a.focus({preventScroll:!0})})):(m.preventDefault(),n.openListbox())}),T=re(()=>{if(t.labelId)return[t.labelId,o].join(" ")},[t.labelId,o]),h=p.useMemo(()=>({open:t.listboxState===0,disabled:t.disabled,value:t.value}),[t]),R={ref:c,id:o,type:ye(e,t.buttonRef),"aria-haspopup":"listbox","aria-controls":(i=t.optionsRef.current)==null?void 0:i.id,"aria-expanded":t.listboxState===0,"aria-labelledby":T,disabled:t.disabled,onKeyDown:y,onKeyUp:L,onClick:w};return F({ourProps:R,theirProps:s,slot:h,defaultTag:He,name:"Listbox.Button"})}let Ge="label";function Ke(e,l){let i=G(),{id:r=`headlessui-listbox-label-${i}`,...o}=e,s=B("Listbox.Label"),t=A("Listbox.Label"),n=M(s.labelRef,l);U(()=>t.registerLabel(r),[r]);let c=x(()=>{var y;return(y=s.buttonRef.current)==null?void 0:y.focus({preventScroll:!0})}),b=p.useMemo(()=>({open:s.listboxState===0,disabled:s.disabled}),[s]);return F({ourProps:{ref:n,id:r,onClick:c},theirProps:o,slot:b,defaultTag:Ge,name:"Listbox.Label"})}let Je="ul",Xe=te.RenderStrategy|te.Static;function Ye(e,l){var i;let r=G(),{id:o=`headlessui-listbox-options-${r}`,...s}=e,t=B("Listbox.Options"),n=A("Listbox.Options"),c=M(t.optionsRef,l),b=H(),y=H(),L=$e(),w=L!==null?(L&W.Open)===W.Open:t.listboxState===0;p.useEffect(()=>{var a;let g=t.optionsRef.current;g&&t.listboxState===0&&g!==((a=De(g))==null?void 0:a.activeElement)&&g.focus({preventScroll:!0})},[t.listboxState,t.optionsRef]);let T=x(a=>{switch(y.dispose(),a.key){case O.Space:if(t.searchQuery!=="")return a.preventDefault(),a.stopPropagation(),n.search(a.key);case O.Enter:if(a.preventDefault(),a.stopPropagation(),t.activeOptionIndex!==null){let{dataRef:g}=t.options[t.activeOptionIndex];n.onChange(g.current.value)}t.mode===0&&(n.closeListbox(),X().nextFrame(()=>{var g;return(g=t.buttonRef.current)==null?void 0:g.focus({preventScroll:!0})}));break;case E(t.orientation,{vertical:O.ArrowDown,horizontal:O.ArrowRight}):return a.preventDefault(),a.stopPropagation(),n.goToOption($.Next);case E(t.orientation,{vertical:O.ArrowUp,horizontal:O.ArrowLeft}):return a.preventDefault(),a.stopPropagation(),n.goToOption($.Previous);case O.Home:case O.PageUp:return a.preventDefault(),a.stopPropagation(),n.goToOption($.First);case O.End:case O.PageDown:return a.preventDefault(),a.stopPropagation(),n.goToOption($.Last);case O.Escape:return a.preventDefault(),a.stopPropagation(),n.closeListbox(),b.nextFrame(()=>{var g;return(g=t.buttonRef.current)==null?void 0:g.focus({preventScroll:!0})});case O.Tab:a.preventDefault(),a.stopPropagation();break;default:a.key.length===1&&(n.search(a.key),y.setTimeout(()=>n.clearSearch(),350));break}}),h=re(()=>{var a;return(a=t.buttonRef.current)==null?void 0:a.id},[t.buttonRef.current]),R=p.useMemo(()=>({open:t.listboxState===0}),[t]),m={"aria-activedescendant":t.activeOptionIndex===null||(i=t.options[t.activeOptionIndex])==null?void 0:i.id,"aria-multiselectable":t.mode===1?!0:void 0,"aria-labelledby":h,"aria-orientation":t.orientation,id:o,onKeyDown:T,role:"listbox",tabIndex:0,ref:c};return F({ourProps:m,theirProps:s,slot:R,defaultTag:Je,features:Xe,visible:w,name:"Listbox.Options"})}let Ze="li";function et(e,l){let i=G(),{id:r=`headlessui-listbox-option-${i}`,disabled:o=!1,value:s,...t}=e,n=B("Listbox.Option"),c=A("Listbox.Option"),b=n.activeOptionIndex!==null?n.options[n.activeOptionIndex].id===r:!1,y=n.isSelected(s),L=p.useRef(null),w=Ne(L),T=we({disabled:o,value:s,domRef:L,get textValue(){return w()}}),h=M(l,L);U(()=>{if(n.listboxState!==0||!b||n.activationTrigger===0)return;let d=X();return d.requestAnimationFrame(()=>{var P,v;(v=(P=L.current)==null?void 0:P.scrollIntoView)==null||v.call(P,{block:"nearest"})}),d.dispose},[L,b,n.listboxState,n.activationTrigger,n.activeOptionIndex]),U(()=>c.registerOption(r,T),[T,r]);let R=x(d=>{if(o)return d.preventDefault();c.onChange(s),n.mode===0&&(c.closeListbox(),X().nextFrame(()=>{var P;return(P=n.buttonRef.current)==null?void 0:P.focus({preventScroll:!0})}))}),m=x(()=>{if(o)return c.goToOption($.Nothing);c.goToOption($.Specific,r)}),a=Se(),g=x(d=>a.update(d)),C=x(d=>{a.wasMoved(d)&&(o||b||c.goToOption($.Specific,r,0))}),D=x(d=>{a.wasMoved(d)&&(o||b&&c.goToOption($.Nothing))}),k=p.useMemo(()=>({active:b,selected:y,disabled:o}),[b,y,o]);return F({ourProps:{id:r,ref:h,role:"option",tabIndex:o===!0?void 0:-1,"aria-disabled":o===!0?!0:void 0,"aria-selected":y,disabled:void 0,onClick:R,onFocus:m,onPointerEnter:g,onMouseEnter:g,onPointerMove:C,onMouseMove:C,onPointerLeave:D,onMouseLeave:D},theirProps:t,slot:k,defaultTag:Ze,name:"Listbox.Option"})}let tt=V(Ue),at=V(We),rt=V(Ke),nt=V(Ye),lt=V(et),j=Object.assign(tt,{Button:at,Label:rt,Options:nt,Option:lt});const ae=({options:e,defaultValue:l,placeholder:i="Selecciona una opción",size:r="xl",className:o="",disabled:s=!1,error:t,label:n,readOnly:c=!1,type:b="normal",required:y=!1,listHeight:L=32,onChange:w,...T})=>{const h=p.useRef(null),R={value:"",label:`${i}`},m=[{...R},...e],[a,g]=p.useState(l??m[0]),C=()=>g(R),D=N("bg-white absolute w-full overflow-auto rounded-lg text-base shadow-md ring-black/5 focus:outline-none z-50 p-1",{[`h-${L}`]:L});return S.jsxs("div",{className:"relative w-full",children:[S.jsx("select",{style:{display:"none"},ref:h}),S.jsx(j,{value:a,onChange:k=>{c||(g(k),w==null||w(k),h.current&&h.current.dispatchEvent(new Event("change",{bubbles:!0})))},disabled:s||c,defaultValue:l,rest:T,children:({open:k})=>S.jsxs(S.Fragment,{children:[!!n&&S.jsxs(j.Label,{className:N("text-gray-10 mb-2 text-base font-normal",{"block leading-6":b==="normal","absolute text-xl duration-300 transform -translate-y-6 scale-75 top-0 origin-[0]":b==="underline"}),children:[S.jsx("label",{className:"text-red-500 mr-1",children:y&&"*"}),n&&`${n}`]}),S.jsxs("div",{className:"w-full flex items-center align-middle justify-center",children:[S.jsxs(j.Button,{className:N("relative w-full text bg-white truncate text-left pl-3 ring-1 ring-inset pr-8",{"h-6 text-sm":r==="sm","h-8 text-base":r==="md","h-10 text-lg":r==="lg","h-12 text-lg":r==="xl","cursor-not-allowed ring-gray-7 bg-gray-4 text-gray-6":s,"text-gray-6":!a.value,"ring-gray-7":!s,"\n                rounded-lg\n                font-normal focus-visible:outline-none\n                focus:ring-primary-blue ":b==="normal","block\n                  w-full\n                  ring-transparent\n                  border-b border-gray-300\n                focus:border-primary-blue\n                  focus-visible:outline-none bg-transparent\n                  appearance-none\n                ":b==="underline","ring-red-400 border-red-400 focus:ring-red-600 focus:border-red-600":t&&!s,"cursor-not-allowed text-primary-blue":c,[o]:o}),children:[a.label,!a.value&&S.jsx("span",{className:"pointer-events-none absolute inset-y-0 right-0 flex items-center pr-4",children:S.jsx(he,{className:"size-5","aria-hidden":"true"})})]}),!!a.value&&S.jsx("span",{className:N("absolute right-0 flex items-center pr-4 text-gray-6",{"cursor-not-allowed":s||c,"text-primary-blue":c,"hover:text-gray-8 z-50 cursor-pointer transition-all duration-100 ease-linear":!s&&!c}),children:S.jsx(xe,{"aria-hidden":!0,className:"size-5",onClick:()=>!s&&!c&&C()})})]}),S.jsx(Te,{show:k,as:p.Fragment,...Re,children:S.jsx(j.Options,{className:D,children:e==null?void 0:e.map((d,P)=>S.jsx(j.Option,{disabled:d==null?void 0:d.disabled,className:({active:v,selected:q})=>N("relative w-100 py-2 select-none px-4 rounded-lg",{"cursor-pointer":!(d!=null&&d.disabled),"bg-gray-4":!q&&v,"bg-tints-Blue-90 font-bold":q||q&&v,"cursor-not-allowed text-gray-300":d==null?void 0:d.disabled}),value:d,children:d==null?void 0:d.label},`${P}_-_${n}`))})})]})}),t&&S.jsx("p",{className:"text-sm text-red-600",children:t})]})};try{ae.displayName="Select",ae.__docgenInfo={description:"",displayName:"Select",props:{label:{defaultValue:null,description:"",name:"label",required:!1,type:{name:"string"}},options:{defaultValue:null,description:"",name:"options",required:!0,type:{name:"TOption[]"}},defaultValue:{defaultValue:null,description:"",name:"defaultValue",required:!1,type:{name:"TOption"}},placeholder:{defaultValue:{value:"Selecciona una opción"},description:"",name:"placeholder",required:!1,type:{name:"string"}},size:{defaultValue:{value:"xl"},description:"",name:"size",required:!1,type:{name:"enum",value:[{value:'"sm"'},{value:'"md"'},{value:'"lg"'},{value:'"xl"'}]}},type:{defaultValue:{value:"normal"},description:"",name:"type",required:!1,type:{name:"enum",value:[{value:'"normal"'},{value:'"underline"'}]}},error:{defaultValue:null,description:"",name:"error",required:!1,type:{name:"ReactNode"}},disabled:{defaultValue:{value:"false"},description:"",name:"disabled",required:!1,type:{name:"boolean"}},readOnly:{defaultValue:{value:"false"},description:"",name:"readOnly",required:!1,type:{name:"boolean"}},required:{defaultValue:{value:"false"},description:"",name:"required",required:!1,type:{name:"boolean"}},listHeight:{defaultValue:{value:"32"},description:"",name:"listHeight",required:!1,type:{name:"enum",value:[{value:"24"},{value:"32"},{value:"40"},{value:"48"},{value:"64"},{value:"80"},{value:"96"}]}},onChange:{defaultValue:null,description:"",name:"onChange",required:!1,type:{name:"((value: TOption) => void)"}},onSearch:{defaultValue:null,description:"",name:"onSearch",required:!1,type:{name:"((value: string) => void)"}},className:{defaultValue:{value:""},description:"",name:"className",required:!1,type:{name:"string"}},onClick:{defaultValue:null,description:"",name:"onClick",required:!1,type:{name:"(() => void)"}},style:{defaultValue:null,description:"",name:"style",required:!1,type:{name:"CSSProperties"}}}}}catch{}export{ae as S};
