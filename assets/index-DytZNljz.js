import{j as m}from"./jsx-runtime-CKrituN3.js";import{r as d,R as L}from"./index-CBqU2yxZ.js";import{B as q,S as J}from"./index-48ItvSJm.js";import{u as X,S as Z}from"./useTranslation-BtJcBoU7.js";import{F as _}from"./index-BFP8q0AU.js";import{T as Y,u as ee,c as I,f as te,d as re}from"./index-QaoBqWcy.js";import{O as V,U as T,y as D,o as x,s as ae,u as G,d as E,C as $,p as z,a as ne,l as j,c as C,q as se}from"./transition-BDdlExqH.js";import{y as ie,I as U,h as oe,T as le,a as p,r as ue,_ as ce,M as Q,D as H,b as de}from"./keyboard-B5upkSX_.js";import{n as me}from"./use-owner-BuQqy2kA.js";import{s as pe}from"./use-text-value-DqQEW2an.js";import{F as fe}from"./use-tree-walker-B-9c0BuR.js";const ve=e=>d.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",height:"1em",width:"1em",fill:"currentColor",viewBox:"0 -960 960 960",...e},d.createElement("path",{d:"M480-360 280-560h400L480-360Z"}));var ge=(e=>(e[e.Open=0]="Open",e[e.Closed=1]="Closed",e))(ge||{}),xe=(e=>(e[e.Pointer=0]="Pointer",e[e.Other=1]="Other",e))(xe||{}),ye=(e=>(e[e.OpenMenu=0]="OpenMenu",e[e.CloseMenu=1]="CloseMenu",e[e.GoToItem=2]="GoToItem",e[e.Search=3]="Search",e[e.ClearSearch=4]="ClearSearch",e[e.RegisterItem=5]="RegisterItem",e[e.UnregisterItem=6]="UnregisterItem",e))(ye||{});function A(e,o=a=>a){let a=e.activeItemIndex!==null?e.items[e.activeItemIndex]:null,s=de(o(e.items.slice()),l=>l.dataRef.current.domRef.current),r=a?s.indexOf(a):null;return r===-1&&(r=null),{items:s,activeItemIndex:r}}let he={1(e){return e.menuState===1?e:{...e,activeItemIndex:null,menuState:1}},0(e){return e.menuState===0?e:{...e,__demoMode:!1,menuState:0}},2:(e,o)=>{var a;let s=A(e),r=te(o,{resolveItems:()=>s.items,resolveActiveIndex:()=>s.activeItemIndex,resolveId:l=>l.id,resolveDisabled:l=>l.dataRef.current.disabled});return{...e,...s,searchQuery:"",activeItemIndex:r,activationTrigger:(a=o.trigger)!=null?a:1}},3:(e,o)=>{let a=e.searchQuery!==""?0:1,s=e.searchQuery+o.value.toLowerCase(),r=(e.activeItemIndex!==null?e.items.slice(e.activeItemIndex+a).concat(e.items.slice(0,e.activeItemIndex+a)):e.items).find(i=>{var t;return((t=i.dataRef.current.textValue)==null?void 0:t.startsWith(s))&&!i.dataRef.current.disabled}),l=r?e.items.indexOf(r):-1;return l===-1||l===e.activeItemIndex?{...e,searchQuery:s}:{...e,searchQuery:s,activeItemIndex:l,activationTrigger:1}},4(e){return e.searchQuery===""?e:{...e,searchQuery:"",searchActiveItemIndex:null}},5:(e,o)=>{let a=A(e,s=>[...s,{id:o.id,dataRef:o.dataRef}]);return{...e,...a}},6:(e,o)=>{let a=A(e,s=>{let r=s.findIndex(l=>l.id===o.id);return r!==-1&&s.splice(r,1),s});return{...e,...a,activationTrigger:1}}},O=d.createContext(null);O.displayName="MenuContext";function N(e){let o=d.useContext(O);if(o===null){let a=new Error(`<${e} /> is missing a parent <Menu /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(a,N),a}return o}function Ie(e,o){return G(o.type,he,e,o)}let be=d.Fragment;function Re(e,o){let{__demoMode:a=!1,...s}=e,r=d.useReducer(Ie,{__demoMode:a,menuState:a?0:1,buttonRef:d.createRef(),itemsRef:d.createRef(),items:[],searchQuery:"",activeItemIndex:null,activationTrigger:1}),[{menuState:l,itemsRef:i,buttonRef:t},u]=r,f=D(o);ie([t,i],(b,w)=>{var c;u({type:1}),oe(w,le.Loose)||(b.preventDefault(),(c=t.current)==null||c.focus())},l===0);let g=x(()=>{u({type:1})}),h=d.useMemo(()=>({open:l===0,close:g}),[l,g]),y={ref:f};return L.createElement(O.Provider,{value:r},L.createElement(ae,{value:G(l,{0:E.Open,1:E.Closed})},$({ourProps:y,theirProps:s,slot:h,defaultTag:be,name:"Menu"})))}let we="button";function Se(e,o){var a;let s=U(),{id:r=`headlessui-menu-button-${s}`,...l}=e,[i,t]=N("Menu.Button"),u=D(i.buttonRef,o),f=z(),g=x(c=>{switch(c.key){case p.Space:case p.Enter:case p.ArrowDown:c.preventDefault(),c.stopPropagation(),t({type:0}),f.nextFrame(()=>t({type:2,focus:I.First}));break;case p.ArrowUp:c.preventDefault(),c.stopPropagation(),t({type:0}),f.nextFrame(()=>t({type:2,focus:I.Last}));break}}),h=x(c=>{switch(c.key){case p.Space:c.preventDefault();break}}),y=x(c=>{if(ue(c.currentTarget))return c.preventDefault();e.disabled||(i.menuState===0?(t({type:1}),f.nextFrame(()=>{var R;return(R=i.buttonRef.current)==null?void 0:R.focus({preventScroll:!0})})):(c.preventDefault(),t({type:0})))}),b=d.useMemo(()=>({open:i.menuState===0}),[i]),w={ref:u,id:r,type:Y(e,i.buttonRef),"aria-haspopup":"menu","aria-controls":(a=i.itemsRef.current)==null?void 0:a.id,"aria-expanded":i.menuState===0,onKeyDown:g,onKeyUp:h,onClick:y};return $({ourProps:w,theirProps:l,slot:b,defaultTag:we,name:"Menu.Button"})}let Me="div",Pe=V.RenderStrategy|V.Static;function ke(e,o){var a,s;let r=U(),{id:l=`headlessui-menu-items-${r}`,...i}=e,[t,u]=N("Menu.Items"),f=D(t.itemsRef,o),g=me(t.itemsRef),h=z(),y=ne(),b=y!==null?(y&E.Open)===E.Open:t.menuState===0;d.useEffect(()=>{let n=t.itemsRef.current;n&&t.menuState===0&&n!==(g==null?void 0:g.activeElement)&&n.focus({preventScroll:!0})},[t.menuState,t.itemsRef,g]),fe({container:t.itemsRef.current,enabled:t.menuState===0,accept(n){return n.getAttribute("role")==="menuitem"?NodeFilter.FILTER_REJECT:n.hasAttribute("role")?NodeFilter.FILTER_SKIP:NodeFilter.FILTER_ACCEPT},walk(n){n.setAttribute("role","none")}});let w=x(n=>{var S,P;switch(h.dispose(),n.key){case p.Space:if(t.searchQuery!=="")return n.preventDefault(),n.stopPropagation(),u({type:3,value:n.key});case p.Enter:if(n.preventDefault(),n.stopPropagation(),u({type:1}),t.activeItemIndex!==null){let{dataRef:v}=t.items[t.activeItemIndex];(P=(S=v.current)==null?void 0:S.domRef.current)==null||P.click()}H(t.buttonRef.current);break;case p.ArrowDown:return n.preventDefault(),n.stopPropagation(),u({type:2,focus:I.Next});case p.ArrowUp:return n.preventDefault(),n.stopPropagation(),u({type:2,focus:I.Previous});case p.Home:case p.PageUp:return n.preventDefault(),n.stopPropagation(),u({type:2,focus:I.First});case p.End:case p.PageDown:return n.preventDefault(),n.stopPropagation(),u({type:2,focus:I.Last});case p.Escape:n.preventDefault(),n.stopPropagation(),u({type:1}),C().nextFrame(()=>{var v;return(v=t.buttonRef.current)==null?void 0:v.focus({preventScroll:!0})});break;case p.Tab:n.preventDefault(),n.stopPropagation(),u({type:1}),C().nextFrame(()=>{ce(t.buttonRef.current,n.shiftKey?Q.Previous:Q.Next)});break;default:n.key.length===1&&(u({type:3,value:n.key}),h.setTimeout(()=>u({type:4}),350));break}}),c=x(n=>{switch(n.key){case p.Space:n.preventDefault();break}}),R=d.useMemo(()=>({open:t.menuState===0}),[t]),M={"aria-activedescendant":t.activeItemIndex===null||(a=t.items[t.activeItemIndex])==null?void 0:a.id,"aria-labelledby":(s=t.buttonRef.current)==null?void 0:s.id,id:l,onKeyDown:w,onKeyUp:c,role:"menu",tabIndex:0,ref:f};return $({ourProps:M,theirProps:i,slot:R,defaultTag:Me,features:Pe,visible:b,name:"Menu.Items"})}let Ee=d.Fragment;function Te(e,o){let a=U(),{id:s=`headlessui-menu-item-${a}`,disabled:r=!1,...l}=e,[i,t]=N("Menu.Item"),u=i.activeItemIndex!==null?i.items[i.activeItemIndex].id===s:!1,f=d.useRef(null),g=D(o,f);j(()=>{if(i.__demoMode||i.menuState!==0||!u||i.activationTrigger===0)return;let v=C();return v.requestAnimationFrame(()=>{var F,B;(B=(F=f.current)==null?void 0:F.scrollIntoView)==null||B.call(F,{block:"nearest"})}),v.dispose},[i.__demoMode,f,u,i.menuState,i.activationTrigger,i.activeItemIndex]);let h=pe(f),y=d.useRef({disabled:r,domRef:f,get textValue(){return h()}});j(()=>{y.current.disabled=r},[y,r]),j(()=>(t({type:5,id:s,dataRef:y}),()=>t({type:6,id:s})),[y,s]);let b=x(()=>{t({type:1})}),w=x(v=>{if(r)return v.preventDefault();t({type:1}),H(i.buttonRef.current)}),c=x(()=>{if(r)return t({type:2,focus:I.Nothing});t({type:2,focus:I.Specific,id:s})}),R=ee(),M=x(v=>R.update(v)),n=x(v=>{R.wasMoved(v)&&(r||u||t({type:2,focus:I.Specific,id:s,trigger:0}))}),S=x(v=>{R.wasMoved(v)&&(r||u&&t({type:2,focus:I.Nothing}))}),P=d.useMemo(()=>({active:u,disabled:r,close:b}),[u,r,b]);return $({ourProps:{id:s,ref:g,role:"menuitem",tabIndex:r===!0?void 0:-1,"aria-disabled":r===!0?!0:void 0,disabled:void 0,onClick:w,onFocus:c,onPointerEnter:M,onMouseEnter:M,onPointerMove:n,onMouseMove:n,onPointerLeave:S,onMouseLeave:S},theirProps:l,slot:P,defaultTag:Ee,name:"Menu.Item"})}let De=T(Re),$e=T(Se),Ne=T(ke),Fe=T(Te),k=Object.assign(De,{Button:$e,Items:Ne,Item:Fe});const K={xs:0,sm:640,md:768,lg:1024,xl:1280},_e=()=>{const[e,o]=d.useState({xs:!1,sm:!1,md:!1,lg:!1,xl:!1});return d.useEffect(()=>{const a=()=>{const s=window.innerWidth,r=Object.keys(K).reduce((i,t)=>{const u=t;return i[u]=s>=K[u],i},{}),l=["sm","md","lg","xl"].every(i=>!r[i]);r.xs=!!l,o(r)};return a(),window.addEventListener("resize",a),()=>{window.removeEventListener("resize",a)}},[]),e},je="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict";let Ae=(e=21)=>{let o="",a=crypto.getRandomValues(new Uint8Array(e));for(;e--;)o+=je[a[e]&63];return o};const W=({avatar:e,rol:o="rol",userName:a="User Name",menuItems:s,storeInfo:r})=>{const{t:l}=X(),{xs:i,sm:t}=_e(),u=[...i?[{label:m.jsxs(_,{align:"end",justify:"end",className:"w-full",direction:"vertical",children:[m.jsx("span",{className:"text-primary-blue",children:a}),m.jsx("span",{className:"text-gray-6",children:o})]})}]:[],...i&&r?[...r.store?[{label:m.jsx(q,{Icon:Z,label:l("header.store"),value:(r==null?void 0:r.store)??0,isBetween:!0})}]:[],...r.cashRegister?[{label:m.jsx(q,{Icon:J,label:l("header.cashRegister"),value:(r==null?void 0:r.cashRegister)??0,isBetween:!0})}]:[]]:[],...s];return m.jsxs(k,{as:"div",className:"relative",children:[m.jsx(k.Button,{className:"max-w-xs bg-transparent flex items-center text-sm rounded-full",children:m.jsxs(_,{gap:2,align:"center",children:[e,t&&m.jsxs(_,{align:"start",direction:"vertical",children:[m.jsx("p",{className:"text-base font-bold text-primary-blue group-hover:text-primary-blue",children:a}),m.jsx("p",{className:"text-sm font-medium text-grays group-hover:text-gray-500",children:o})]}),m.jsx(ve,{className:"text-2xl ml-1"})]})}),m.jsx(se,{as:d.Fragment,...re,children:m.jsx(k.Items,{className:"absolute right-0 mt-2 w-max origin-top-right divide-y divide-gray-100 rounded-md bg-white shadow-lg ring-1 ring-black/5 focus:outline-none",children:u.map(({label:f,href:g})=>m.jsx(k.Item,{children:({active:h})=>m.jsx("a",{href:g,className:`${h?"bg-grays-Macropay-02":"text-gray-900"} group flex w-full items-center rounded-md px-4 py-2 text-sm`,children:f})},Ae()))})})]})};try{W.displayName="UserMenu",W.__docgenInfo={description:"",displayName:"UserMenu",props:{avatar:{defaultValue:null,description:"",name:"avatar",required:!1,type:{name:"ReactNode"}},userName:{defaultValue:{value:"User Name"},description:"",name:"userName",required:!1,type:{name:"string"}},rol:{defaultValue:{value:"rol"},description:"",name:"rol",required:!1,type:{name:"string"}},menuItems:{defaultValue:null,description:"",name:"menuItems",required:!0,type:{name:"MenuItem[]"}},storeInfo:{defaultValue:null,description:"",name:"storeInfo",required:!1,type:{name:"IStoreInfo"}},langs:{defaultValue:null,description:"",name:"langs",required:!1,type:{name:"Locale[]"}}}}}catch{}export{ve as S,W as U,Ae as n,k as q,_e as u};
