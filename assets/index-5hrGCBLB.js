import{j as m}from"./jsx-runtime-CKrituN3.js";import{r as d,R as q}from"./index-CBqU2yxZ.js";import{B as V,S as X}from"./index-CW2oqz23.js";import{S as Z}from"./store-Co352TV1.js";import{F as j}from"./index-i7xSa-B7.js";import{T as Y,u as ee,c as I,f as te,d as re}from"./index-QaoBqWcy.js";import{c as M}from"./classNames-CoONMu-Z.js";import{u as ae}from"./useTranslation-DXU8A8CY.js";import{O as Q,U as D,y as N,o as y,s as ne,u as z,d as T,C as $,p as H,a as se,l as A,c as U,q as ie}from"./transition-BDdlExqH.js";import{y as oe,I as B,h as le,T as ue,a as p,r as ce,_ as de,M as K,D as J,b as me}from"./keyboard-B5upkSX_.js";import{n as pe}from"./use-owner-BuQqy2kA.js";import{s as fe}from"./use-text-value-DqQEW2an.js";import{F as ve}from"./use-tree-walker-B-9c0BuR.js";const ge=e=>d.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",height:"1em",width:"1em",fill:"currentColor",viewBox:"0 -960 960 960",...e},d.createElement("path",{d:"M480-360 280-560h400L480-360Z"}));var xe=(e=>(e[e.Open=0]="Open",e[e.Closed=1]="Closed",e))(xe||{}),ye=(e=>(e[e.Pointer=0]="Pointer",e[e.Other=1]="Other",e))(ye||{}),he=(e=>(e[e.OpenMenu=0]="OpenMenu",e[e.CloseMenu=1]="CloseMenu",e[e.GoToItem=2]="GoToItem",e[e.Search=3]="Search",e[e.ClearSearch=4]="ClearSearch",e[e.RegisterItem=5]="RegisterItem",e[e.UnregisterItem=6]="UnregisterItem",e))(he||{});function C(e,o=a=>a){let a=e.activeItemIndex!==null?e.items[e.activeItemIndex]:null,s=me(o(e.items.slice()),l=>l.dataRef.current.domRef.current),r=a?s.indexOf(a):null;return r===-1&&(r=null),{items:s,activeItemIndex:r}}let be={1(e){return e.menuState===1?e:{...e,activeItemIndex:null,menuState:1}},0(e){return e.menuState===0?e:{...e,__demoMode:!1,menuState:0}},2:(e,o)=>{var a;let s=C(e),r=te(o,{resolveItems:()=>s.items,resolveActiveIndex:()=>s.activeItemIndex,resolveId:l=>l.id,resolveDisabled:l=>l.dataRef.current.disabled});return{...e,...s,searchQuery:"",activeItemIndex:r,activationTrigger:(a=o.trigger)!=null?a:1}},3:(e,o)=>{let a=e.searchQuery!==""?0:1,s=e.searchQuery+o.value.toLowerCase(),r=(e.activeItemIndex!==null?e.items.slice(e.activeItemIndex+a).concat(e.items.slice(0,e.activeItemIndex+a)):e.items).find(i=>{var t;return((t=i.dataRef.current.textValue)==null?void 0:t.startsWith(s))&&!i.dataRef.current.disabled}),l=r?e.items.indexOf(r):-1;return l===-1||l===e.activeItemIndex?{...e,searchQuery:s}:{...e,searchQuery:s,activeItemIndex:l,activationTrigger:1}},4(e){return e.searchQuery===""?e:{...e,searchQuery:"",searchActiveItemIndex:null}},5:(e,o)=>{let a=C(e,s=>[...s,{id:o.id,dataRef:o.dataRef}]);return{...e,...a}},6:(e,o)=>{let a=C(e,s=>{let r=s.findIndex(l=>l.id===o.id);return r!==-1&&s.splice(r,1),s});return{...e,...a,activationTrigger:1}}},O=d.createContext(null);O.displayName="MenuContext";function F(e){let o=d.useContext(O);if(o===null){let a=new Error(`<${e} /> is missing a parent <Menu /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(a,F),a}return o}function Ie(e,o){return z(o.type,be,e,o)}let we=d.Fragment;function Re(e,o){let{__demoMode:a=!1,...s}=e,r=d.useReducer(Ie,{__demoMode:a,menuState:a?0:1,buttonRef:d.createRef(),itemsRef:d.createRef(),items:[],searchQuery:"",activeItemIndex:null,activationTrigger:1}),[{menuState:l,itemsRef:i,buttonRef:t},u]=r,f=N(o);oe([t,i],(b,R)=>{var c;u({type:1}),le(R,ue.Loose)||(b.preventDefault(),(c=t.current)==null||c.focus())},l===0);let x=y(()=>{u({type:1})}),h=d.useMemo(()=>({open:l===0,close:x}),[l,x]),v={ref:f};return q.createElement(O.Provider,{value:r},q.createElement(ne,{value:z(l,{0:T.Open,1:T.Closed})},$({ourProps:v,theirProps:s,slot:h,defaultTag:we,name:"Menu"})))}let Se="button";function Me(e,o){var a;let s=B(),{id:r=`headlessui-menu-button-${s}`,...l}=e,[i,t]=F("Menu.Button"),u=N(i.buttonRef,o),f=H(),x=y(c=>{switch(c.key){case p.Space:case p.Enter:case p.ArrowDown:c.preventDefault(),c.stopPropagation(),t({type:0}),f.nextFrame(()=>t({type:2,focus:I.First}));break;case p.ArrowUp:c.preventDefault(),c.stopPropagation(),t({type:0}),f.nextFrame(()=>t({type:2,focus:I.Last}));break}}),h=y(c=>{switch(c.key){case p.Space:c.preventDefault();break}}),v=y(c=>{if(ce(c.currentTarget))return c.preventDefault();e.disabled||(i.menuState===0?(t({type:1}),f.nextFrame(()=>{var w;return(w=i.buttonRef.current)==null?void 0:w.focus({preventScroll:!0})})):(c.preventDefault(),t({type:0})))}),b=d.useMemo(()=>({open:i.menuState===0}),[i]),R={ref:u,id:r,type:Y(e,i.buttonRef),"aria-haspopup":"menu","aria-controls":(a=i.itemsRef.current)==null?void 0:a.id,"aria-expanded":i.menuState===0,onKeyDown:x,onKeyUp:h,onClick:v};return $({ourProps:R,theirProps:l,slot:b,defaultTag:Se,name:"Menu.Button"})}let Pe="div",ke=Q.RenderStrategy|Q.Static;function Ee(e,o){var a,s;let r=B(),{id:l=`headlessui-menu-items-${r}`,...i}=e,[t,u]=F("Menu.Items"),f=N(t.itemsRef,o),x=pe(t.itemsRef),h=H(),v=se(),b=v!==null?(v&T.Open)===T.Open:t.menuState===0;d.useEffect(()=>{let n=t.itemsRef.current;n&&t.menuState===0&&n!==(x==null?void 0:x.activeElement)&&n.focus({preventScroll:!0})},[t.menuState,t.itemsRef,x]),ve({container:t.itemsRef.current,enabled:t.menuState===0,accept(n){return n.getAttribute("role")==="menuitem"?NodeFilter.FILTER_REJECT:n.hasAttribute("role")?NodeFilter.FILTER_SKIP:NodeFilter.FILTER_ACCEPT},walk(n){n.setAttribute("role","none")}});let R=y(n=>{var S,k;switch(h.dispose(),n.key){case p.Space:if(t.searchQuery!=="")return n.preventDefault(),n.stopPropagation(),u({type:3,value:n.key});case p.Enter:if(n.preventDefault(),n.stopPropagation(),u({type:1}),t.activeItemIndex!==null){let{dataRef:g}=t.items[t.activeItemIndex];(k=(S=g.current)==null?void 0:S.domRef.current)==null||k.click()}J(t.buttonRef.current);break;case p.ArrowDown:return n.preventDefault(),n.stopPropagation(),u({type:2,focus:I.Next});case p.ArrowUp:return n.preventDefault(),n.stopPropagation(),u({type:2,focus:I.Previous});case p.Home:case p.PageUp:return n.preventDefault(),n.stopPropagation(),u({type:2,focus:I.First});case p.End:case p.PageDown:return n.preventDefault(),n.stopPropagation(),u({type:2,focus:I.Last});case p.Escape:n.preventDefault(),n.stopPropagation(),u({type:1}),U().nextFrame(()=>{var g;return(g=t.buttonRef.current)==null?void 0:g.focus({preventScroll:!0})});break;case p.Tab:n.preventDefault(),n.stopPropagation(),u({type:1}),U().nextFrame(()=>{de(t.buttonRef.current,n.shiftKey?K.Previous:K.Next)});break;default:n.key.length===1&&(u({type:3,value:n.key}),h.setTimeout(()=>u({type:4}),350));break}}),c=y(n=>{switch(n.key){case p.Space:n.preventDefault();break}}),w=d.useMemo(()=>({open:t.menuState===0}),[t]),P={"aria-activedescendant":t.activeItemIndex===null||(a=t.items[t.activeItemIndex])==null?void 0:a.id,"aria-labelledby":(s=t.buttonRef.current)==null?void 0:s.id,id:l,onKeyDown:R,onKeyUp:c,role:"menu",tabIndex:0,ref:f};return $({ourProps:P,theirProps:i,slot:w,defaultTag:Pe,features:ke,visible:b,name:"Menu.Items"})}let Te=d.Fragment;function De(e,o){let a=B(),{id:s=`headlessui-menu-item-${a}`,disabled:r=!1,...l}=e,[i,t]=F("Menu.Item"),u=i.activeItemIndex!==null?i.items[i.activeItemIndex].id===s:!1,f=d.useRef(null),x=N(o,f);A(()=>{if(i.__demoMode||i.menuState!==0||!u||i.activationTrigger===0)return;let g=U();return g.requestAnimationFrame(()=>{var _,L;(L=(_=f.current)==null?void 0:_.scrollIntoView)==null||L.call(_,{block:"nearest"})}),g.dispose},[i.__demoMode,f,u,i.menuState,i.activationTrigger,i.activeItemIndex]);let h=fe(f),v=d.useRef({disabled:r,domRef:f,get textValue(){return h()}});A(()=>{v.current.disabled=r},[v,r]),A(()=>(t({type:5,id:s,dataRef:v}),()=>t({type:6,id:s})),[v,s]);let b=y(()=>{t({type:1})}),R=y(g=>{if(r)return g.preventDefault();t({type:1}),J(i.buttonRef.current)}),c=y(()=>{if(r)return t({type:2,focus:I.Nothing});t({type:2,focus:I.Specific,id:s})}),w=ee(),P=y(g=>w.update(g)),n=y(g=>{w.wasMoved(g)&&(r||u||t({type:2,focus:I.Specific,id:s,trigger:0}))}),S=y(g=>{w.wasMoved(g)&&(r||u&&t({type:2,focus:I.Nothing}))}),k=d.useMemo(()=>({active:u,disabled:r,close:b}),[u,r,b]);return $({ourProps:{id:s,ref:x,role:"menuitem",tabIndex:r===!0?void 0:-1,"aria-disabled":r===!0?!0:void 0,disabled:void 0,onClick:R,onFocus:c,onPointerEnter:P,onMouseEnter:P,onPointerMove:n,onMouseMove:n,onPointerLeave:S,onMouseLeave:S},theirProps:l,slot:k,defaultTag:Te,name:"Menu.Item"})}let Ne=D(Re),$e=D(Me),Fe=D(Ee),_e=D(De),E=Object.assign(Ne,{Button:$e,Items:Fe,Item:_e});const W={xs:0,sm:640,md:768,lg:1024,xl:1280},je=()=>{const[e,o]=d.useState({xs:!1,sm:!1,md:!1,lg:!1,xl:!1});return d.useEffect(()=>{const a=()=>{const s=window.innerWidth,r=Object.keys(W).reduce((i,t)=>{const u=t;return i[u]=s>=W[u],i},{}),l=["sm","md","lg","xl"].every(i=>!r[i]);r.xs=!!l,o(r)};return a(),window.addEventListener("resize",a),()=>{window.removeEventListener("resize",a)}},[]),e},Ae="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict";let Ce=(e=21)=>{let o="",a=crypto.getRandomValues(new Uint8Array(e));for(;e--;)o+=Ae[a[e]&63];return o};const G=({avatar:e,rol:o="rol",userName:a="User Name",menuItems:s,storeInfo:r,theme:l="white"})=>{const{t:i}=ae(),{xs:t,sm:u}=je(),f=[...t?[{label:m.jsxs(j,{align:"end",justify:"end",className:"w-full",direction:"vertical",children:[m.jsx("span",{className:"text-primary-blue",children:a}),m.jsx("span",{className:"text-gray-6",children:o})]})}]:[],...t&&r?[...r.store?[{label:m.jsx(V,{Icon:Z,label:i("header.store"),value:(r==null?void 0:r.store)??0,isBetween:!0,theme:l})}]:[],...r.cashRegister?[{label:m.jsx(V,{Icon:X,label:i("header.cashRegister"),value:(r==null?void 0:r.cashRegister)??0,isBetween:!0,theme:l})}]:[]]:[],...s];return m.jsxs(E,{as:"div",className:M("relative",{}),children:[m.jsx(E.Button,{className:"max-w-lg bg-transparent flex items-center text-sm rounded-full",children:m.jsxs(j,{gap:2,align:"center",children:[e,u&&m.jsxs(j,{align:"start",direction:"vertical",children:[m.jsx("p",{className:M("text-base font-bold text-primary-blue group-hover:text-primary-blue",{"text-white":l==="blue"}),children:a}),m.jsx("p",{className:M("text-sm font-medium text-grays group-hover:text-gray-500",{"text-white":l==="blue"}),children:o})]}),m.jsx(ge,{className:M("text-2xl ml-1",{"text-white bg-shades-Blue-30 rounded":l==="blue"})})]})}),m.jsx(ie,{as:d.Fragment,...re,children:m.jsx(E.Items,{className:"py-2 absolute right-0 mt-2 w-max origin-top-right divide-y divide-gray-100 rounded-md bg-white shadow-lg ring-1 ring-black/5 focus:outline-none",children:f.map(({label:x,href:h,disabled:v})=>m.jsx(E.Item,{disabled:v,children:({active:b})=>m.jsx("a",{href:h,className:M("group flex w-full items-center rounded-none px-4 py-2 text-sm transition delay-150 duration-200 ease-in-out",{"cursor-pointer text-gray-8":!v,"bg-grays-Macropay-02":b,"cursor-not-allowed text-gray-300":v}),children:x})},Ce()))})})]})};try{G.displayName="UserMenu",G.__docgenInfo={description:"",displayName:"UserMenu",props:{menuItems:{defaultValue:null,description:"",name:"menuItems",required:!0,type:{name:"MenuItem[]"}},avatar:{defaultValue:null,description:"",name:"avatar",required:!1,type:{name:"ReactNode"}},userName:{defaultValue:{value:"User Name"},description:"",name:"userName",required:!1,type:{name:"string"}},rol:{defaultValue:{value:"rol"},description:"",name:"rol",required:!1,type:{name:"string"}},storeInfo:{defaultValue:null,description:"",name:"storeInfo",required:!1,type:{name:"IStoreInfo"}},langs:{defaultValue:null,description:"",name:"langs",required:!1,type:{name:"Locale[]"}},theme:{defaultValue:{value:"white"},description:"",name:"theme",required:!1,type:{name:"enum",value:[{value:'"blue"'},{value:'"white"'}]}}}}}catch{}export{ge as S,G as U,Ce as n,E as q,je as u};
