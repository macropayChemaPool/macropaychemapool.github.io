import{j as a}from"./jsx-runtime-CKrituN3.js";import{M as Q}from"./index-gq-3YsZg.js";import{r as x}from"./index-CBqU2yxZ.js";import{S as X,a as z}from"./home--1CEivZ2.js";import{S as ee}from"./progress-activity-BInxmABt.js";import{F as v}from"./index-IKkC8jR6.js";import{I as te}from"./index-0sbIw9IC.js";import{u as U}from"./useTranslation-GCZZtW1t.js";import{A as F}from"./index-CD_jVu0m.js";import{B as re}from"./index-BmpHqVfh.js";import{n as M}from"./index.browser-DP16PUbO.js";const O=({children:r,image:t})=>{const{t:e}=U();return a.jsxs(v,{direction:"vertical",className:"md:flex-row",gap:3,align:"center",children:[a.jsx(v,{className:"h-[13.5rem] w-[9.75rem] flex-none",align:"center",justify:"center",children:a.jsx("img",{className:"flex-none",src:t,width:114,height:216,alt:"Verified device"})}),a.jsxs(v,{gap:6,direction:"vertical",children:[a.jsxs(v,{gap:3,direction:"vertical",children:[a.jsx("h3",{className:"font-semibold text-2xl",children:e("guideVerificationModal.verificationCompleted.title")}),r]}),a.jsx("p",{className:"font-normal text-base",children:e("guideVerificationModal.verificationCompleted.description")})]})]})};try{O.displayName="VerificationCompleted",O.__docgenInfo={description:"",displayName:"VerificationCompleted",props:{image:{defaultValue:null,description:"",name:"image",required:!0,type:{name:"string"}}}}}catch{}const P=({required:r,dynamic:t=!1})=>{const{t:e}=U();return t?a.jsx(F,{message:a.jsxs(a.Fragment,{children:[a.jsx("span",{className:"text-sm font-normal",children:e("guideVerificationModal.userAlert.dynamic.head")})," ",a.jsx("span",{className:"text-sm font-bold",children:e("guideVerificationModal.userAlert.dynamic.highlight",{count:Number(r)})})]}),type:r?"info":"warning"}):a.jsx(F,{message:a.jsxs(a.Fragment,{children:[a.jsx("span",{className:"text-sm font-bold",children:e("guideVerificationModal.userAlert.static.highlight")})," ",a.jsx("span",{className:"text-sm font-normal",children:e("guideVerificationModal.userAlert.static.tail")})]}),type:"warning"})};try{P.displayName="DynamicUserAlert",P.__docgenInfo={description:"",displayName:"DynamicUserAlert",props:{required:{defaultValue:null,description:"",name:"required",required:!1,type:{name:"boolean"}},dynamic:{defaultValue:{value:"false"},description:"",name:"dynamic",required:!1,type:{name:"boolean"}}}}}catch{}const ne=x.memo(({verificationCompletedImage:r,instructions:t,completed:e,dynamicAlert:n,required:i})=>e?a.jsx(O,{image:r,children:a.jsx(P,{dynamic:n,required:i})}):a.jsx(te,{className:"md:h-[13.5rem]",items:t}));var I=function(r,t){return I=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},I(r,t)};function b(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");I(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}function B(r){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&r[t],n=0;if(e)return e.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function A(r,t){var e=typeof Symbol=="function"&&r[Symbol.iterator];if(!e)return r;var n=e.call(r),i,o=[],s;try{for(;(t===void 0||t-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(c){s={error:c}}finally{try{i&&!i.done&&(e=n.return)&&e.call(n)}finally{if(s)throw s.error}}return o}function j(r,t,e){if(e||arguments.length===2)for(var n=0,i=t.length,o;n<i;n++)(o||!(n in t))&&(o||(o=Array.prototype.slice.call(t,0,n)),o[n]=t[n]);return r.concat(o||Array.prototype.slice.call(t))}function f(r){return typeof r=="function"}function ie(r){var t=function(n){Error.call(n),n.stack=new Error().stack},e=r(t);return e.prototype=Object.create(Error.prototype),e.prototype.constructor=e,e}var C=ie(function(r){return function(e){r(this),this.message=e?e.length+` errors occurred during unsubscription:
`+e.map(function(n,i){return i+1+") "+n.toString()}).join(`
  `):"",this.name="UnsubscriptionError",this.errors=e}});function T(r,t){if(r){var e=r.indexOf(t);0<=e&&r.splice(e,1)}}var V=function(){function r(t){this.initialTeardown=t,this.closed=!1,this._parentage=null,this._finalizers=null}return r.prototype.unsubscribe=function(){var t,e,n,i,o;if(!this.closed){this.closed=!0;var s=this._parentage;if(s)if(this._parentage=null,Array.isArray(s))try{for(var c=B(s),l=c.next();!l.done;l=c.next()){var p=l.value;p.remove(this)}}catch(d){t={error:d}}finally{try{l&&!l.done&&(e=c.return)&&e.call(c)}finally{if(t)throw t.error}}else s.remove(this);var u=this.initialTeardown;if(f(u))try{u()}catch(d){o=d instanceof C?d.errors:[d]}var h=this._finalizers;if(h){this._finalizers=null;try{for(var y=B(h),m=y.next();!m.done;m=y.next()){var w=m.value;try{G(w)}catch(d){o=o??[],d instanceof C?o=j(j([],A(o)),A(d.errors)):o.push(d)}}}catch(d){n={error:d}}finally{try{m&&!m.done&&(i=y.return)&&i.call(y)}finally{if(n)throw n.error}}}if(o)throw new C(o)}},r.prototype.add=function(t){var e;if(t&&t!==this)if(this.closed)G(t);else{if(t instanceof r){if(t.closed||t._hasParent(this))return;t._addParent(this)}(this._finalizers=(e=this._finalizers)!==null&&e!==void 0?e:[]).push(t)}},r.prototype._hasParent=function(t){var e=this._parentage;return e===t||Array.isArray(e)&&e.includes(t)},r.prototype._addParent=function(t){var e=this._parentage;this._parentage=Array.isArray(e)?(e.push(t),e):e?[e,t]:t},r.prototype._removeParent=function(t){var e=this._parentage;e===t?this._parentage=null:Array.isArray(e)&&T(e,t)},r.prototype.remove=function(t){var e=this._finalizers;e&&T(e,t),t instanceof r&&t._removeParent(this)},r.EMPTY=function(){var t=new r;return t.closed=!0,t}(),r}();V.EMPTY;function W(r){return r instanceof V||r&&"closed"in r&&f(r.remove)&&f(r.add)&&f(r.unsubscribe)}function G(r){f(r)?r():r.unsubscribe()}var K={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},Z={setTimeout:function(r,t){for(var e=[],n=2;n<arguments.length;n++)e[n-2]=arguments[n];return setTimeout.apply(void 0,j([r,t],A(e)))},clearTimeout:function(r){var t=Z.delegate;return((t==null?void 0:t.clearTimeout)||clearTimeout)(r)},delegate:void 0};function oe(r){Z.setTimeout(function(){throw r})}function L(){}function se(r){r()}var D=function(r){b(t,r);function t(e){var n=r.call(this)||this;return n.isStopped=!1,e?(n.destination=e,W(e)&&e.add(n)):n.destination=ue,n}return t.create=function(e,n,i){return new N(e,n,i)},t.prototype.next=function(e){this.isStopped||this._next(e)},t.prototype.error=function(e){this.isStopped||(this.isStopped=!0,this._error(e))},t.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},t.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,r.prototype.unsubscribe.call(this),this.destination=null)},t.prototype._next=function(e){this.destination.next(e)},t.prototype._error=function(e){try{this.destination.error(e)}finally{this.unsubscribe()}},t.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},t}(V),ae=Function.prototype.bind;function q(r,t){return ae.call(r,t)}var ce=function(){function r(t){this.partialObserver=t}return r.prototype.next=function(t){var e=this.partialObserver;if(e.next)try{e.next(t)}catch(n){S(n)}},r.prototype.error=function(t){var e=this.partialObserver;if(e.error)try{e.error(t)}catch(n){S(n)}else S(t)},r.prototype.complete=function(){var t=this.partialObserver;if(t.complete)try{t.complete()}catch(e){S(e)}},r}(),N=function(r){b(t,r);function t(e,n,i){var o=r.call(this)||this,s;if(f(e)||!e)s={next:e??void 0,error:n??void 0,complete:i??void 0};else{var c;o&&K.useDeprecatedNextContext?(c=Object.create(e),c.unsubscribe=function(){return o.unsubscribe()},s={next:e.next&&q(e.next,c),error:e.error&&q(e.error,c),complete:e.complete&&q(e.complete,c)}):s=e}return o.destination=new ce(s),o}return t}(D);function S(r){oe(r)}function le(r){throw r}var ue={closed:!0,next:L,error:le,complete:L},de=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}();function fe(r){return r}function pe(r){return r.length===0?fe:r.length===1?r[0]:function(e){return r.reduce(function(n,i){return i(n)},e)}}var he=function(){function r(t){t&&(this._subscribe=t)}return r.prototype.lift=function(t){var e=new r;return e.source=this,e.operator=t,e},r.prototype.subscribe=function(t,e,n){var i=this,o=ye(t)?t:new N(t,e,n);return se(function(){var s=i,c=s.operator,l=s.source;o.add(c?c.call(o,l):l?i._subscribe(o):i._trySubscribe(o))}),o},r.prototype._trySubscribe=function(t){try{return this._subscribe(t)}catch(e){t.error(e)}},r.prototype.forEach=function(t,e){var n=this;return e=R(e),new e(function(i,o){var s=new N({next:function(c){try{t(c)}catch(l){o(l),s.unsubscribe()}},error:o,complete:i});n.subscribe(s)})},r.prototype._subscribe=function(t){var e;return(e=this.source)===null||e===void 0?void 0:e.subscribe(t)},r.prototype[de]=function(){return this},r.prototype.pipe=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return pe(t)(this)},r.prototype.toPromise=function(t){var e=this;return t=R(t),new t(function(n,i){var o;e.subscribe(function(s){return o=s},function(s){return i(s)},function(){return n(o)})})},r.create=function(t){return new r(t)},r}();function R(r){var t;return(t=r??K.Promise)!==null&&t!==void 0?t:Promise}function me(r){return r&&f(r.next)&&f(r.error)&&f(r.complete)}function ye(r){return r&&r instanceof D||me(r)&&W(r)}function ve(r){return f(r==null?void 0:r.lift)}function be(r){return function(t){if(ve(t))return t.lift(function(e){try{return r(e,this)}catch(n){this.error(n)}});throw new TypeError("Unable to lift unknown Observable type")}}function ge(r,t,e,n,i){return new xe(r,t,e,n,i)}var xe=function(r){b(t,r);function t(e,n,i,o,s,c){var l=r.call(this,e)||this;return l.onFinalize=s,l.shouldUnsubscribe=c,l._next=n?function(p){try{n(p)}catch(u){e.error(u)}}:r.prototype._next,l._error=o?function(p){try{o(p)}catch(u){e.error(u)}finally{this.unsubscribe()}}:r.prototype._error,l._complete=i?function(){try{i()}catch(p){e.error(p)}finally{this.unsubscribe()}}:r.prototype._complete,l}return t.prototype.unsubscribe=function(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){var n=this.closed;r.prototype.unsubscribe.call(this),!n&&((e=this.onFinalize)===null||e===void 0||e.call(this))}},t}(D),we={now:function(){return Date.now()},delegate:void 0},_e=function(r){b(t,r);function t(e,n){return r.call(this)||this}return t.prototype.schedule=function(e,n){return this},t}(V),k={setInterval:function(r,t){for(var e=[],n=2;n<arguments.length;n++)e[n-2]=arguments[n];return setInterval.apply(void 0,j([r,t],A(e)))},clearInterval:function(r){var t=k.delegate;return((t==null?void 0:t.clearInterval)||clearInterval)(r)},delegate:void 0},Se=function(r){b(t,r);function t(e,n){var i=r.call(this,e,n)||this;return i.scheduler=e,i.work=n,i.pending=!1,i}return t.prototype.schedule=function(e,n){var i;if(n===void 0&&(n=0),this.closed)return this;this.state=e;var o=this.id,s=this.scheduler;return o!=null&&(this.id=this.recycleAsyncId(s,o,n)),this.pending=!0,this.delay=n,this.id=(i=this.id)!==null&&i!==void 0?i:this.requestAsyncId(s,this.id,n),this},t.prototype.requestAsyncId=function(e,n,i){return i===void 0&&(i=0),k.setInterval(e.flush.bind(e,this),i)},t.prototype.recycleAsyncId=function(e,n,i){if(i===void 0&&(i=0),i!=null&&this.delay===i&&this.pending===!1)return n;n!=null&&k.clearInterval(n)},t.prototype.execute=function(e,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var i=this._execute(e,n);if(i)return i;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},t.prototype._execute=function(e,n){var i=!1,o;try{this.work(e)}catch(s){i=!0,o=s||new Error("Scheduled action threw falsy error")}if(i)return this.unsubscribe(),o},t.prototype.unsubscribe=function(){if(!this.closed){var e=this,n=e.id,i=e.scheduler,o=i.actions;this.work=this.state=this.scheduler=null,this.pending=!1,T(o,this),n!=null&&(this.id=this.recycleAsyncId(i,n,null)),this.delay=null,r.prototype.unsubscribe.call(this)}},t}(_e),H=function(){function r(t,e){e===void 0&&(e=r.now),this.schedulerActionCtor=t,this.now=e}return r.prototype.schedule=function(t,e,n){return e===void 0&&(e=0),new this.schedulerActionCtor(this,t).schedule(n,e)},r.now=we.now,r}(),Ae=function(r){b(t,r);function t(e,n){n===void 0&&(n=H.now);var i=r.call(this,e,n)||this;return i.actions=[],i._active=!1,i}return t.prototype.flush=function(e){var n=this.actions;if(this._active){n.push(e);return}var i;this._active=!0;do if(i=e.execute(e.state,e.delay))break;while(e=n.shift());if(this._active=!1,i){for(;e=n.shift();)e.unsubscribe();throw i}},t}(H),je=new Ae(Se),Ve=je;function Ee(r){return f(r.schedule)}function Me(r){return r instanceof Date&&!isNaN(r)}function Ce(r,t,e){e===void 0&&(e=Ve);var n=-1;return Ee(t)?e=t:n=t,new he(function(i){var o=Me(r)?+r-e.now():r;o<0&&(o=0);var s=0;return e.schedule(function(){i.closed||(i.next(s++),0<=n?this.schedule(void 0,n):i.complete())},o)})}function qe(r,t){return t===void 0&&(t=!1),be(function(e,n){var i=0;e.subscribe(ge(n,function(o){var s=r(o,i++);(s||t)&&n.next(o),!s&&n.complete()}))})}const Y=({isOpen:r,instructionsConfig:t,disabledOk:e,closeLabel:n,dynamicAlert:i,navigationSteps:o,onClose:s,onClick:c,requiredMessage:l=!1,isLoading:p=!1})=>{const{t:u}=U(),[h,y]=x.useState(0),m=x.useMemo(()=>[{id:M(),qrCode:t.stepOne,description:u("guideVerificationModal.steps.downloadApp")},{id:M(),image:t.stepTwo,description:u("guideVerificationModal.steps.enterApplication")},{id:M(),qrCode:t.stepThree,qrColor:"#0047BA",description:u("guideVerificationModal.steps.validateDevice")}],[t]),w=h===0,d=w?"buttonOk":"buttonWaitOk",g=o.length>0&&o.every(({status:_})=>_==="COMPLETE"),$=x.useCallback(_=>{const J=Ce(0,1e3).pipe(qe(E=>E<=_)).subscribe({next:E=>{y(_-E)}});return()=>{J.unsubscribe()}},[]);return x.useEffect(()=>{g&&$(5)},[g]),a.jsx(Q,{isOpen:r,className:"w-[60rem] min-w-80 py-8 sm:max-w-full",title:u("guideVerificationModal.title"),message:u("guideVerificationModal.message"),type:"info",buttonCancel:{children:n??u("common.goToMenu"),icon:!n&&a.jsx(X,{}),onClick:s,disabled:g&&h!==0},buttonOk:{children:u(`guideVerificationModal.${d}`,{countdown:h}),icon:w&&a.jsx(z,{}),iconPosition:"right",disabled:!g||e||h!==0||p,onClick:c},children:p?a.jsx("div",{className:"relative transform overflow-hidden text-left transition-all",children:a.jsx("div",{className:"flex justify-center",children:a.jsx(ee,{className:"animate-spin text-9xl text-primary-blue"})})}):a.jsxs(v,{gap:4,direction:"vertical",children:[a.jsx("div",{className:"bg-gray-100 rounded-xl p-1 text-lg text-grays-Macropay-07 font-normal",children:a.jsx("div",{className:"text-primary-blue font-semibold text-sm p-4 rounded-lg grid grid-flow-col justify-stretch text-center bg-white me-0",children:u("guideVerificationModal.instructions")})}),a.jsxs(v,{className:" md:flex-row",gap:2,direction:"vertical",children:[a.jsx("div",{className:"md:w-48 flex-none",children:a.jsx(re,{className:"w-full",steps:o})}),a.jsx("div",{className:"max-w-full md:min-w-[70%]",children:a.jsx(ne,{instructions:m,completed:g,dynamicAlert:i,required:l,verificationCompletedImage:t.verificationCompleted})})]})]})})};try{Y.displayName="GuideVerificationModal",Y.__docgenInfo={description:"",displayName:"GuideVerificationModal",props:{isOpen:{defaultValue:null,description:"",name:"isOpen",required:!0,type:{name:"boolean"}},isLoading:{defaultValue:{value:"false"},description:"",name:"isLoading",required:!1,type:{name:"boolean"}},dynamicAlert:{defaultValue:null,description:"",name:"dynamicAlert",required:!1,type:{name:"boolean"}},disabledOk:{defaultValue:null,description:"",name:"disabledOk",required:!1,type:{name:"boolean"}},closeLabel:{defaultValue:null,description:"",name:"closeLabel",required:!1,type:{name:"string"}},requiredMessage:{defaultValue:{value:"false"},description:"",name:"requiredMessage",required:!1,type:{name:"boolean"}},onClose:{defaultValue:null,description:"",name:"onClose",required:!1,type:{name:"(() => void)"}},onClick:{defaultValue:null,description:"",name:"onClick",required:!1,type:{name:"(() => void)"}},instructionsConfig:{defaultValue:null,description:"",name:"instructionsConfig",required:!0,type:{name:"{ stepOne: string; stepTwo: string; stepThree: string; verificationCompleted: string; }"}},navigationSteps:{defaultValue:null,description:"",name:"navigationSteps",required:!0,type:{name:"IBulletNavigationStep[]"}}}}}catch{}export{Y as G};
